import{s as p}from"./index-Cu4XXnoU.js";import{s as I}from"./index-CcB3t-zi.js";import{s as u}from"./index-CZa0FNcp.js";import{s as N}from"./index-DQ8cLXqv.js";import{a as A,s as f}from"./index-DcSSPTs4.js";import{e as x}from"./index-DVvVa46w.js";import{d as T,f as D,Q as J,r as v,i as F,c as w,k as a,w as t,F as C,o as h,a as d,u as n,b as c,t as M,m as z}from"./index-CTL3uMAw.js";import{i as V}from"./instanceModel-fE5jqBOM.js";import{C as H}from"./ContentWrapper-DBGTnP6y.js";import{F as L}from"./FloatingButton-BleLqc6S.js";import"./index-7CsHJrCC.js";import"./index-6aE6aYUW.js";import"./index-BrTedIes.js";import"./index-DIEcY0n5.js";import"./index-BD4JFYyf.js";import"./index-t--hEgTQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:1,class:"p-d-flex p-ai-center p-jc-center"},E={style:{display:"flex","flex-flow":"column",gap:"1rem"}},O={style:{display:"flex","flex-flow":"column",gap:"1rem"}},me=T({__name:"Instance",setup(Q){const r=D(),S=J(),b=v(!1),P=v([{name:"SD",value:"SD"},{name:"SMP",value:"SMP"},{name:"SMA",value:"SMA"},{name:"SMK",value:"SMK"},{name:"Perguruan Tinggi",value:"Perguruan Tinggi"}]),o=v({name:"",instance_id:"",address:"",jenjang:""}),B=()=>{b.value=!0},K=()=>{if(!o.value.name||!o.value.instance_id||!o.value.address||!o.value.jenjang){r.add({severity:"error",summary:"Kesalahan",detail:"Semua field wajib diisi!",life:2e3});return}V().createInstance(o.value).then(s=>{o.value={name:"",instance_id:"",address:""},b.value=!1,r.add({severity:"success",summary:"Berhasil",detail:"Instansi disimpan",life:2e3}),y()}).catch(s=>{r.add({severity:"error",summary:"Kesalahan",detail:s,life:2e3})})},g=v([]),y=()=>{V().getInstances().then(s=>{g.value=s}).catch(s=>{r.add({severity:"error",summary:"Kesalahan",detail:s,life:2e3})})};F(()=>{y()});const k=v(!1),i=v({name:"",instance_id:"",address:"",jenjang:"",_id:""}),U=s=>{k.value=!0,i.value={name:s.name,instance_id:s.instance_id,jenjang:s.jenjang,address:s.address,_id:s._id}},_=()=>{if(!i.value.name||!i.value.instance_id||!i.value.address||!i.value.jenjang){r.add({severity:"error",summary:"Kesalahan",detail:"Semua field wajib diisi!",life:2e3});return}V().updateInstance(i.value).then(s=>{k.value=!1,i.value={name:"",instance_id:"",address:"",_id:""},r.add({severity:"success",summary:"Berhasil",detail:"Instansi diperbarui",life:2e3}),y()}).catch(s=>{r.add({severity:"error",summary:"Kesalahan",detail:s,life:2e3})})},$=(s,e)=>{S.require({target:e.currentTarget,header:"Konfirmasi Hapus Instansi",message:`Anda yakin ingin menghapus ${s.name}? Partisipan yang terdaftar (jika ada) akan ikut dihapus.`,icon:"pi pi-exclamation-triangle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Hapus",severity:"danger"},accept:()=>{const m={_id:s._id};V().deleteInstance(m).then(l=>{r.add({severity:"success",summary:"Berhasil",detail:"Instansi dihapus",life:2e3}),y()}).catch(l=>{r.add({severity:"error",summary:"Kesalahan",detail:l,life:2e3})})}})};return(s,e)=>{const m=z("fasicon");return h(),w(C,null,[a(H,{contentTitle:"Instansi"},{default:t(()=>[g.value.length>0?(h(),w(C,{key:0},[a(n(A),{filter:"",value:g.value,class:"p-datatable-striped p-datatable-gridlines"},{default:t(()=>[a(n(f),{header:"No",style:{width:"3rem"}},{body:t(({data:l,index:j})=>[c(M(j+1),1)]),_:1}),a(n(f),{sortable:"",field:"name",header:"Nama Instansi"}),a(n(f),{sortable:"",field:"instance_id",header:"Nomor Pokok Instansi"}),a(n(f),{sortable:"",field:"address",header:"Alamat Instansi"}),a(n(f),{sortable:"",field:"jenjang",header:"Jenjang"}),a(n(f),{header:"Aksi",style:{width:"10rem"}},{body:t(({data:l})=>[a(n(I),{onClick:j=>U(l),class:"p-button-warning p-button-text"},{default:t(()=>[a(m,{icon:"edit"})]),_:2},1032,["onClick"]),a(n(I),{onClick:j=>$(l,j),class:"p-button-danger p-button-text"},{default:t(()=>[a(m,{icon:"trash"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value"]),d("p",null,"Jumlah data: "+M(g.value.length),1)],64)):(h(),w("div",q,[d("p",null,[e[10]||(e[10]=c("Belum ada data instansi. Klik ")),a(m,{icon:"plus"}),e[11]||(e[11]=c(" untuk menambahkan data instansi."))])])),a(n(N),{visible:b.value,"onUpdate:visible":e[4]||(e[4]=l=>b.value=l),modal:"",header:"Buat Instansi",style:{width:"30rem"},maximizable:!0,draggable:!1},{default:t(()=>[d("div",E,[a(n(u),null,{default:t(()=>[a(n(p),{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),style:{width:"100%"},id:"instanceName",placeholder:"Masukkan nama instansi"},null,8,["modelValue"]),e[12]||(e[12]=d("label",{for:"username"},"Nama Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(p),{modelValue:o.value.instance_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.instance_id=l),style:{width:"100%"},id:"instanceName",placeholder:"Nomor pokok instansi"},null,8,["modelValue"]),e[13]||(e[13]=d("label",{for:"username"},"Nomor Pokok Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(p),{modelValue:o.value.address,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.address=l),style:{width:"100%"},id:"instanceName",placeholder:"Masukkan alamat"},null,8,["modelValue"]),e[14]||(e[14]=d("label",{for:"username"},"Alamat Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(x),{modelValue:o.value.jenjang,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.jenjang=l),options:P.value,optionLabel:"name","option-value":"value",style:{width:"100%"},placeholder:"Pilih Jenjang"},null,8,["modelValue","options"]),e[15]||(e[15]=d("label",{for:"username"},"Jenjang",-1))]),_:1}),a(n(I),{onClick:K,class:"p-button-success",style:{width:"fit-content"}},{default:t(()=>[a(m,{icon:"plus"}),e[16]||(e[16]=c(" Tambah Instansi"))]),_:1})])]),_:1},8,["visible"]),a(n(N),{visible:k.value,"onUpdate:visible":e[9]||(e[9]=l=>k.value=l),modal:"",header:"Perbarui Data Instansi",style:{width:"30rem"},maximizable:!0,draggable:!1},{default:t(()=>[d("div",O,[a(n(u),null,{default:t(()=>[a(n(p),{modelValue:i.value.name,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.name=l),style:{width:"100%"},placeholder:"Masukkan nama instansi"},null,8,["modelValue"]),e[17]||(e[17]=d("label",{for:"username"},"Nama Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(p),{modelValue:i.value.instance_id,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.instance_id=l),style:{width:"100%"},placeholder:"Nomor pokok instansi"},null,8,["modelValue"]),e[18]||(e[18]=d("label",{for:"username"},"Nomor Pokok Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(p),{modelValue:i.value.address,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value.address=l),style:{width:"100%"},placeholder:"Masukkan alamat"},null,8,["modelValue"]),e[19]||(e[19]=d("label",{for:"username"},"Alamat Instansi",-1))]),_:1}),a(n(u),null,{default:t(()=>[a(n(x),{modelValue:i.value.jenjang,"onUpdate:modelValue":e[8]||(e[8]=l=>i.value.jenjang=l),options:P.value,optionLabel:"name","option-value":"value",style:{width:"100%"},placeholder:"Pilih Jenjang"},null,8,["modelValue","options"]),e[20]||(e[20]=d("label",{for:"username"},"Jenjang",-1))]),_:1}),a(n(I),{onClick:_,class:"p-button-success",style:{width:"fit-content"}},{default:t(()=>[a(m,{icon:"plus"}),e[21]||(e[21]=c(" Perbarui Data"))]),_:1})])]),_:1},8,["visible"])]),_:1}),a(L,{onFabClick:B})],64)}}});export{me as default};
