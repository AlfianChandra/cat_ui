import{s as v}from"./index-B6p2Nsl_.js";import{s as r}from"./index-CebLASv9.js";import{s as h}from"./index-VDt4N7-Y.js";import{s as c}from"./index-BoVejXH4.js";import{d as k,r as p,f as b,p as V,w as u,o as C,a as s,k as t,b as w,t as B,u as a,e as m,q as M,h as U}from"./index-D8N-YEmx.js";import{u as _}from"./auth-_2ylusuq.js";import{a as N}from"./index-t--hEgTQ.js";import{B as T}from"./BaseWrapper-0A6ewZ-i.js";import"./index-DWqkmtiQ.js";import"./index-PIPAwceg.js";import"./http-w-ez0J3y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"login"},E={style:{margin:"0",padding:"0"}},G={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},L={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},P={style:{display:"flex","flex-flow":"row wrap",gap:"5px"}},S={style:{display:"flex","flex-flow":"row nowrap","justify-content":"right"}},Q=k({__name:"Login",setup(j){const l=p(!1),f=_(),n=b(),i=p(""),d=p("");M(),U();const y=async()=>{if(i.value===""||d.value===""){n.add({severity:"error",summary:"Opss",detail:"Mohon isi semua bidang",life:3e3});return}l.value=!0;const g={email:i.value,password:d.value};await N.post(m.baseEnd+"/auth/login",g).then(e=>{e.status==200&&(f.setToken(e.data.token),f.setUserId(e.data.user.id),n.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),l.value=!1,setTimeout(()=>{window.location.href="/"},2e3))}).catch(e=>{n.add({severity:"error",summary:"Gagal",detail:e.response.data.message,life:3e3}),l.value=!1})},x=async()=>{window.location.href=m.baseEnd+"/auth/google"};return(g,e)=>(C(),V(T,null,{default:u(()=>[s("div",$,[e[6]||(e[6]=s("div",null,[s("img",{src:"https://evalground.com/img/icons-img/adaptive-test.svg",style:{width:"200px"}})],-1)),s("div",null,[s("div",null,[e[5]||(e[5]=s("h1",{style:{margin:"0",padding:"0"}},"Masuk",-1)),s("p",E,[e[4]||(e[4]=w("untuk melanjutkan ke ")),s("b",null,B(a(m).appFullName),1)])]),s("div",G,[t(a(v),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),style:{width:"350px",padding:"12px"},placeholder:"E-Mail"},null,8,["modelValue"])]),s("div",L,[t(a(v),{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),style:{width:"350px",padding:"12px"},type:"password",placeholder:"Password",minlength:"8"},null,8,["modelValue"])]),s("div",P,[t(a(r),{label:"Masuk",style:{padding:"12px",width:"150px"},onClick:y}),t(a(r),{label:"Masuk dengan Google",style:{padding:"12px",width:"200px"},onClick:x})])])]),t(a(h),{closable:!1,visible:l.value,"onUpdate:visible":e[3]||(e[3]=o=>l.value=o),modal:"",header:"Please wait",style:{width:"25rem"}},{default:u(()=>[e[8]||(e[8]=s("p",{style:{padding:"0","margin-top":"0px"}},"Authorizing...",-1)),t(a(c),{mode:"indeterminate",style:{height:"6px"}}),s("div",S,[t(a(r),{onClick:e[2]||(e[2]=o=>l.value=!1),style:{"margin-top":"1rem"}},{default:u(()=>e[7]||(e[7]=[w("Cancel")])),_:1})])]),_:1},8,["visible"])]),_:1}))}});export{Q as default};
