import{d as J,r as m,f as O,Q as E,S as Q,i as G,c as r,k as a,w as d,u as o,F as j,o as i,a as s,T as X,l as _,t as p,e as Z,b as c,O as ee,p as x,m as te}from"./index-CTL3uMAw.js";import{u as M}from"./userModel-9E936WYv.js";import{d as se}from"./jwt-DHQMwwia.js";import{s as k}from"./index-CcB3t-zi.js";import{h as C}from"./moment-C5S46NFB.js";import{s as ae}from"./index-CZa0FNcp.js";import{s as g,a as ne}from"./index-DcSSPTs4.js";import{s as ie}from"./index-Cu4XXnoU.js";import{s as oe}from"./index-u6uMTMgW.js";import{t as $}from"./testModel-DEYKdKEF.js";import{t as le}from"./testSessionModel-D-0p4N_z.js";import{s as z}from"./index-DQ8cLXqv.js";import{B as re}from"./BaseWrapper-CvjF3sQ8.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-t--hEgTQ.js";import"./index-6aE6aYUW.js";import"./index-DVvVa46w.js";import"./index-DIEcY0n5.js";import"./index-BrTedIes.js";import"./index-BD4JFYyf.js";import"./index-7CsHJrCC.js";const ue={key:0,style:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center"}},me={style:{margin:"0",padding:"0"}},ce={style:{margin:"0",padding:"0"}},pe={style:{"margin-top":"1rem"}},fe=["src"],ye={key:1,src:"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png?20150327203541",style:{"border-radius":"300px",width:"300px",height:"300px","object-fit":"cover"}},ve={style:{"text-align":"center"}},ge={key:0},ke={key:1,style:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center",width:"100%"}},he={key:0,style:{display:"flex","flex-flow":"row wrap","justify-content":"center",width:"100%"}},be=["index"],_e={style:{margin:"0",padding:"0","text-align":"center"}},xe={key:0,style:{"text-align":"center","margin-top":"0.5rem","font-size":"16px",color:"orange"}},we={key:1,style:{"text-align":"center","margin-top":"0.5rem","font-size":"16px",color:"#888"}},Se={style:{"text-align":"center","margin-top":"0.5rem","font-size":"12px",color:"#555",background:"#ddd",padding:"10px","padding-left":"2rem","padding-right":"2rem","border-radius":"10px",width:"fit-content"}},Ae={key:0,style:{color:"red"}},Ce={style:{display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","margin-top":"1rem",gap:"0.5rem"}},Te={style:{padding:"25px"}},De={style:{margin:"0"}},je={key:0},Me={key:1},$e={key:1,style:{"font-size":"12px",color:"green"}},ze={key:1,style:{"text-align":"left",display:"block",margin:"0",padding:"0","margin-top":"1rem"}},Ue={style:{display:"flex","flex-flow":"column"}},Le={style:{display:"flex","flex-flow":"column",width:"100%","box-sizing":"border-box","overflow-wrap":"break-word"}},Ve=["innerHTML"],Be=J({__name:"ClientAssessment",setup(Ke){const U=m(localStorage.getItem("authToken")||""),L=m(se(U.value)||{}),u=m({}),w=m([]),f=O(),V=E(),B=()=>{M().getUserData(L.value.id).then(n=>{u.value=n}).catch(n=>{f.add({severity:"error",summary:"Kesalahan",detail:n,life:3e3})})},K=()=>{M().getUserActiveTestSession().then(n=>{w.value=n}).catch(n=>{f.add({severity:"error",summary:"Kesalahan",detail:n,life:3e3})})};Q(()=>u.value,()=>{K()},{deep:!0});const h=m(!1),T=m(""),P=m([]),I=n=>{h.value=!0,T.value=n.description,P.value=n.questions},b=m(""),N=n=>{if(b.value=n._id,!n.isStarted){f.add({severity:"warn",summary:"Peringatan",detail:"Asesmen belum dibuka.",life:3e3});return}if(n.password.length>0){v.value=!0;return}S()},Y=n=>{b.value=n,S()},q=()=>{if(!y.value){f.add({severity:"error",summary:"Kesalahan",detail:"Mohon masukkan sandi.",life:3e3});return}const n={id:b.value,password:y.value};$().verifyPassword(n).then(e=>{e.isCorrect?(y.value="",v.value=!1,S()):(f.add({severity:"error",summary:"Kesalahan",detail:"Sandi salah atau tidak valid.",life:3e3}),y.value="",v.value=!1)}).catch(e=>{f.add({severity:"error",summary:"Kesalahan",detail:e,life:3e3}),v.value=!1})},y=m(""),v=m(!1),S=()=>{V.require({message:"Apakah Anda yakin ingin memulai asesmen ini?",header:"Konfirmasi",icon:"pi pi-exclamation-triangle",acceptLabel:"Ya, Mulai",rejectLabel:"Tidak",acceptClass:"p-button-success",rejectClass:"p-button-secondary",accept:()=>{R()},reject:()=>{}})},R=()=>{const n={id:b.value};$().startAssesment(n).then(e=>{const l=e.session_token;localStorage.setItem("testToken",l),window.location.href="/assessment/session"}).catch(e=>{f.add({severity:"error",summary:"Kesalahan",detail:e,life:3e3})})},A=m([]),H=()=>{le().getUserSessions().then(n=>{A.value=n}).catch(n=>{})},W=n=>{const e=new Date,l=C(n),t=C.duration(l.diff(e));return`0${t.hours()}:${t.minutes()}`.replace(/:0(\d)/,":$1")};return G(()=>{B(),H()}),(n,e)=>{const l=te("fasicon");return i(),r(j,null,[a(re,null,{default:d(()=>[a(X,{name:"slide-fade"},{default:d(()=>[Object.keys(u.value).length>0?(i(),r("div",ue,[e[12]||(e[12]=s("h1",{style:{margin:"0",padding:"0","font-size":"40px","text-align":"center"}},"Halo, Selamat Datang!",-1)),s("h2",me,p(u.value.profile.name),1),s("div",null,[s("pre",ce,p(u.value.profile.email),1)]),s("div",pe,[u.value.profile.avatar?(i(),r("img",{key:0,src:`${o(Z).baseUserContent}/${u.value.profile.avatar}`,style:{"border-radius":"250px",width:"250px",height:"250px","object-fit":"cover"}},null,8,fe)):(i(),r("img",ye))]),s("div",null,[s("p",ve,[e[4]||(e[4]=c("Instansi / Jurusan ")),e[5]||(e[5]=s("br",null,null,-1)),s("b",null,p(u.value.participant_instance.name),1),e[6]||(e[6]=c("   ·   ")),s("b",null,p(u.value.participant_data.jurusan)+" "+p(u.value.participant_data.kelas),1)])]),u.value.is_participant?(i(),r("div",ke,[w.value.length>0?(i(),r("div",he,[(i(!0),r(j,null,ee(w.value,(t,D)=>(i(),r("div",{class:"pneucard",index:D,style:{padding:"25px",width:"31%",display:"flex","flex-flow":"column","align-items":"center","background-color":"#eee"}},[a(l,{icon:"clipboard-list",style:{"font-size":"50px",color:"#000","text-align":"center","margin-bottom":"1rem"}}),s("h4",_e,p(t.name),1),t.isStarted?(i(),r("span",xe,[s("b",null,[a(l,{icon:"check"}),e[7]||(e[7]=c(" Sudah Dibuka"))])])):(i(),r("span",we,e[8]||(e[8]=[s("b",null,"Belum Dibuka",-1)]))),s("div",Se,[s("b",null,[a(l,{icon:"clock"}),c(" "+p(t.timeLimit)+" Menit",1)]),t.password.length>0?(i(),r("div",Ae,[s("b",null,[a(l,{icon:"lock"}),e[9]||(e[9]=c(" Sesi Terkunci"))])])):_("",!0)]),s("div",Ce,[a(o(k),{onClick:F=>I(t),style:{width:"fit-content","font-size":"12px"}},{default:d(()=>[a(l,{icon:"search"}),e[10]||(e[10]=c(" Detail Asesmen"))]),_:2},1032,["onClick"]),a(o(k),{disabled:!t.isStarted,onClick:F=>N(t),class:"p-button-success",style:{width:"fit-content","font-size":"12px"}},{default:d(()=>[a(l,{icon:"play"}),e[11]||(e[11]=c(" Mulai Asesmen"))]),_:2},1032,["disabled","onClick"])])],8,be))),256))])):_("",!0)])):(i(),r("p",ge,"Mohon maaf, Anda bukan/belum menjadi peserta terdaftar. Silahkan laporkan kepada operator untuk mendaftar ke asesmen."))])):_("",!0)]),_:1}),s("div",Te,[s("h2",De,[a(l,{icon:"history"}),e[13]||(e[13]=c(" Riwayat Asesmen Anda"))]),A.value.length>0?(i(),x(o(ne),{key:0,value:A.value,style:{"margin-top":"1rem"}},{default:d(()=>[a(o(g),{field:"test.name",header:"Nama Asesmen"}),a(o(g),{field:"status",header:"Status"},{body:d(({data:t})=>[t.session.test_status=="completed"?(i(),x(l,{key:0,style:{color:"green"},icon:"check-circle"})):t.session.test_status=="in_progress"?(i(),x(l,{key:1,style:{color:"orange"},icon:"clock"})):_("",!0)]),_:1}),a(o(g),{field:"createdAt",header:"Dibuat Pada"},{body:d(({data:t})=>[s("span",null,p(o(C)(t.createdAt).format("ddd, DD MMM YYYY")),1)]),_:1}),a(o(g),{header:"Sisa Waktu"},{body:d(({data:t})=>[t.session.test_status!="completed"?(i(),r("span",je,p(W(t.session.end)),1)):(i(),r("span",Me,"-"))]),_:1}),a(o(g),{header:"Soal Dikerjakan"},{body:d(({data:t})=>[s("span",null,p(t.session.state.current_question)+" Soal",1)]),_:1}),a(o(g),{header:"Aksi"},{body:d(({data:t})=>[t.session.test_status!="completed"?(i(),x(o(k),{key:0,onClick:D=>Y(t.session.id_test),class:"p-button-success",style:{width:"fit-content","font-size":"12px"}},{default:d(()=>[a(l,{icon:"play"}),e[14]||(e[14]=c(" Lanjutkan"))]),_:2},1032,["onClick"])):(i(),r("span",$e,[s("b",null,[a(l,{icon:"check"}),e[15]||(e[15]=c(" Selesai"))])]))]),_:1})]),_:1},8,["value"])):(i(),r("p",ze,"Anda belum memiliki riwayat asesmen. Asesmen Anda yang sedang berlangsung atau selesai akan muncul disini"))])]),_:1}),a(o(z),{visible:v.value,"onUpdate:visible":e[1]||(e[1]=t=>v.value=t),header:"Sesi Terkunci",style:{width:"25rem"},modal:""},{default:d(()=>[s("div",Ue,[a(o(ae),null,{default:d(()=>[e[16]||(e[16]=s("label",null,"Sandi",-1)),a(o(ie),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),type:"password",placeholder:"Masukkan Sandi Sesi",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(o(k),{onClick:q,style:{"margin-top":"1rem",width:"fit-content"}},{default:d(()=>[a(l,{icon:"check"}),e[17]||(e[17]=c(" Lanjutkan"))]),_:1})])]),_:1},8,["visible"]),a(o(z),{visible:h.value,"onUpdate:visible":e[3]||(e[3]=t=>h.value=t),header:"Detail Asesmen",style:{width:"60rem"},modal:"",maximizable:""},{default:d(()=>[e[18]||(e[18]=s("h4",{style:{color:"green",margin:"0",padding:"0"}},[s("b",null,"Deskripsi / Tata Tertib Asesmen")],-1)),s("div",Le,[s("div",{innerHTML:T.value,class:"rule-content"},null,8,Ve)]),a(o(oe)),a(o(k),{label:"Tutup",onClick:e[2]||(e[2]=t=>h.value=!1),class:"p-button-secondary"})]),_:1},8,["visible"])],64)}}}),it=de(Be,[["__scopeId","data-v-93017da8"]]);export{it as default};
