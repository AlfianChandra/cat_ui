import{s as w}from"./index-BbVS53HR.js";import{s as K}from"./index-BjET8uEH.js";import{s as y}from"./index-DJE-1bRX.js";import{s as x}from"./index-ChiOjeNX.js";import{q as b}from"./questionModel-UNxWlseu.js";import{s as f}from"./index-TfCfUz9F.js";import{s as h,a as T}from"./index-BGgs4BBn.js";import{d as U,f as M,P as D,r as m,Q as _,i as j,p as A,w as s,o as E,k as a,a as u,u as t,b as V,t as S,m as z}from"./index-CKzr60cR.js";import{C as F}from"./ContentWrapper-BlHWdXUZ.js";import{F as H}from"./FloatingButton-Ck1lj-Oo.js";import"./index-CIWw4wTM.js";import"./index-9sUXEUav.js";import"./index-t--hEgTQ.js";import"./index-C4ILUSSW.js";import"./index-CGT-OZsw.js";import"./index-CUhZFz7J.js";import"./index-qmvPdqgG.js";import"./index-BFt8eVgO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={style:{display:"flex","flex-flow":"column",gap:"1rem"}},L={style:{display:"flex","flex-flow":"column",gap:"1rem"}},me=U({__name:"Questioncat",setup(W){const r=M(),N=D(),v=m(!1),g=m(!1),n=m({name:"",description:""}),o=m({_id:"",name:"",description:""}),k=m(""),$=()=>{if(!n.value.name){r.add({severity:"error",summary:"Kesalahan",detail:"Nama kategori tidak boleh kosong",life:2e3});return}if(!n.value.description){r.add({severity:"error",summary:"Kesalahan",detail:"Deskripsi kategori tidak boleh kosong",life:2e3});return}b().addCategory(n.value).then(i=>{i.status===200?(r.add({severity:"success",summary:"Berhasil",detail:"Kategori berhasil ditambahkan",life:2e3}),v.value=!1,n.value.name="",n.value.description="",p()):r.add({severity:"error",summary:"Kesalahan",detail:i.data.message,life:2e3})}).catch(i=>{console.error(i),r.add({severity:"error",summary:"Kesalahan",detail:"Terjadi kesalahan saat menambahkan kategori",life:2e3})})},C=m([]),p=()=>{C.value=[];const i={search_key:k.value};b().getCategories(i).then(e=>{C.value=e}).catch(e=>{console.error(e)})};_(()=>k.value,()=>{p()}),j(()=>{p()});const B=i=>{o.value._id=i._id,o.value.name=i.name,o.value.description=i.description,g.value=!0},q=()=>{if(!o.value.name){r.add({severity:"error",summary:"Kesalahan",detail:"Nama kategori tidak boleh kosong",life:2e3});return}if(!o.value.description){r.add({severity:"error",summary:"Kesalahan",detail:"Deskripsi kategori tidak boleh kosong",life:2e3});return}b().updateCategory(o.value).then(i=>{r.add({severity:"success",summary:"Berhasil",detail:"Kategori berhasil diperbarui",life:2e3}),g.value=!1,p()}).catch(i=>{console.error(i),r.add({severity:"error",summary:"Kesalahan",detail:"Terjadi kesalahan saat memperbarui kategori",life:2e3})})},P=(i,e)=>{e.stopPropagation(),N.require({message:`Apakah Anda yakin ingin menghapus kategori ${i.name}?`,header:"Konfirmasi Hapus Kategori",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Hapus",severity:"danger"},accept:()=>{b().deleteCategory({_id:i._id}).then(d=>{r.add({severity:"success",summary:"Berhasil",detail:"Kategori berhasil dihapus",life:2e3}),p()}).catch(d=>{console.error(d),r.add({severity:"error",summary:"Kesalahan",detail:"Terjadi kesalahan saat menghapus kategori",life:2e3})})}})};return(i,e)=>{const d=z("fasicon");return E(),A(F,{"content-title":"Kategori Soal"},{default:s(()=>[a(t(f),{style:{"margin-bottom":"1rem"}},{default:s(()=>[a(t(K),{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),style:{width:"300px"},placeholder:"Cari kategori..."},null,8,["modelValue"]),e[8]||(e[8]=u("label",null,"Cari Kategori",-1))]),_:1}),a(t(T),{value:C.value,class:"p-datatable-striped p-datatable-gridlines"},{default:s(()=>[a(t(h),{header:"No",style:{width:"3rem"}},{body:s(({data:l,index:c})=>[V(S(c+1),1)]),_:1}),a(t(h),{sortable:"",field:"name",header:"Nama"}),a(t(h),{sortable:"",field:"description",header:"Keterangan"}),a(t(h),{header:"Aksi",style:{width:"10rem"}},{body:s(({data:l})=>[a(t(y),{onClick:c=>B(l),class:"p-button-warning p-button-text"},{default:s(()=>[a(d,{icon:"edit"})]),_:2},1032,["onClick"]),a(t(y),{onClick:c=>P(l,c),class:"p-button-danger p-button-text"},{default:s(()=>[a(d,{icon:"trash"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value"]),a(t(w),{visible:g.value,"onUpdate:visible":e[3]||(e[3]=l=>g.value=l),modal:"",header:"Edit Kategori",style:{width:"30rem"},maximizable:!0,draggable:!1},{default:s(()=>[u("div",Q,[a(t(f),null,{default:s(()=>[a(t(K),{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.name=l),style:{width:"100%"},placeholder:"Masukkan nama kategori"},null,8,["modelValue"]),e[9]||(e[9]=u("label",null,"Nama Kategori",-1))]),_:1}),a(t(f),null,{default:s(()=>[a(t(x),{modelValue:o.value.description,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.description=l),style:{width:"100%"},placeholder:"Masukkan deskripsi kategori"},null,8,["modelValue"]),e[10]||(e[10]=u("label",null,"Deskripsi Kategori",-1))]),_:1}),a(t(y),{onClick:q,class:"p-button-success",style:{width:"fit-content"}},{default:s(()=>[a(d,{icon:"refresh"}),e[11]||(e[11]=V(" Perbarui"))]),_:1})])]),_:1},8,["visible"]),a(t(w),{visible:v.value,"onUpdate:visible":e[6]||(e[6]=l=>v.value=l),modal:"",header:"Tambah Kategori",style:{width:"30rem"},maximizable:!0,draggable:!1},{default:s(()=>[u("div",L,[a(t(f),null,{default:s(()=>[a(t(K),{modelValue:n.value.name,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.name=l),style:{width:"100%"},placeholder:"Masukkan nama kategori"},null,8,["modelValue"]),e[12]||(e[12]=u("label",null,"Nama Kategori",-1))]),_:1}),a(t(f),null,{default:s(()=>[a(t(x),{modelValue:n.value.description,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.description=l),style:{width:"100%"},placeholder:"Masukkan deskripsi kategori"},null,8,["modelValue"]),e[13]||(e[13]=u("label",null,"Deskripsi Kategori",-1))]),_:1}),a(t(y),{onClick:$,class:"p-button-success",style:{width:"fit-content"}},{default:s(()=>[a(d,{icon:"plus"}),e[14]||(e[14]=V(" Tambah & Simpan"))]),_:1})])]),_:1},8,["visible"]),a(H,{icon:"plus",onClick:e[7]||(e[7]=l=>v.value=!0)})]),_:1})}}});export{me as default};
