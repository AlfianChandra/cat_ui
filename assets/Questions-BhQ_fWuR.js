import{C as Se}from"./ContentWrapper-Fzg6q2AN.js";import{q as k}from"./questionModel-9sTu0egN.js";import{s as wa}from"./index-CFbT-i3X.js";import{s as ge}from"./index-U1r4huw_.js";import{s as g}from"./index-gEKJ5veD.js";import{s as N,a as ha}from"./index-BXZGvAi6.js";import{e as J}from"./index-JrDBRlSH.js";import{u as O}from"./latextParser-Db3xJdvu.js";import{s as K}from"./index-DiTulTVF.js";import{s as de}from"./index-BUK1o0zu.js";import{r as p,d as ka,f as xa,Q as _a,S as X,i as Ca,c as u,k as s,w as c,u as i,F as x,o as r,a as n,b as f,m as Va,p as R,t as B,l as _,O as P,a6 as Sa,e as Pa,n as Ma}from"./index-BYjI3RzL.js";import{s as W}from"./index-eANHdvI0.js";import{u as Ea}from"./materiModel-BrNFT8qq.js";import{r as Ra}from"./markdown-DiUCvktl.js";import{s as $}from"./index-CxtTivIf.js";import{l as $a}from"./index-BLRFddlS.js";import{_ as Ua}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-t--hEgTQ.js";import"./index-C77anOhg.js";import"./index-Bk9Gbc4E.js";import"./index-CuRpGGED.js";import"./index-C2iUiu0F.js";import"./index-wCYQaIC3.js";import"./katex-DhIX2AT_.js";/* empty css                  */import"./html2canvas.esm-BfYXEYrK.js";import"./_commonjsHelpers-Cpj98o6Y.js";function ja(L){let C=L;return C=C.replace(/(\d+)\s*(?:x|times)\s*(\d+)/gi,(D,w,j)=>`${w} \\cdot ${j}`),C}const Pe={socketURL:"https://api.imanextgencbt.id/discussion",socketPath:"/socket.io"},Ta=()=>{const L=p(null);let C=null;return{connectHandler:()=>{L.value=$a(Pe.socketURL,{path:Pe.socketPath,auth:{token:localStorage.getItem("authToken")||""}}),L.value.on("connect",()=>{console.log("Connected to discussion socket"),L.value.on("disc:generate-result",E=>{C==null||C(E)})})},setOnDelta:E=>{C=E},sendRecipe:E=>{L.value.emit("disc:generate",E)}}},ye=Ta(),Ha={style:{display:"flex","flex-flow":"row nowra","align-items":"center","justify-content":"flex-start",gap:"0.4rem"}},La={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between"}},Ia={style:{display:"flex",padding:"8px"}},za={style:{"text-align":"center"}},Aa={style:{"margin-bottom":"0.5rem"}},Ba={key:0},Da=["onClick"],Ga={key:1},Ja=["onClick"],Ka={style:{"margin-bottom":"0.5rem",display:"flex","flex-flow":"column"}},Fa=["innerHTML"],qa={style:{"margin-top":"1rem",display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},Qa=["onClick"],Na=["onClick"],Oa=["onClick"],Xa={style:{display:"flex","flex-flow":"row wrap",gap:"0.15rem"}},Wa=["onDblclick"],Ya=["innerHTML"],Za=["onClick"],el={key:1},al={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},ll={key:1},tl={style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},sl={key:0,style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},ol={key:1,style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},il={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between",gap:"0.2rem"}},nl={style:{margin:"0",padding:"0"}},rl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.2rem"}},dl={style:{display:"flex","flex-flow":"row wrap",gap:"0.4rem"}},ul=["src","alt","onClick"],ml=["onFocusout","innerHTML"],cl={style:{margin:"0"}},pl=["onKeyup","innerHTML"],vl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},fl={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},gl={key:0,style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center",width:"100%",padding:"10px",border:"1px solid #ccc","border-radius":"10px"}},yl=["src","alt"],bl={key:1,style:{"text-align":"center",width:"100%",padding:"10px"}},wl={style:{display:"flex","flex-flow":"column",gap:"0.5rem",padding:"10px",border:"1px solid #ccc","border-radius":"10px",width:"100%"}},hl={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},kl=["src","alt"],xl=["onClick"],_l={key:0,style:{"text-align":"center"}},Cl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},Vl={style:{margin:"0",padding:"0","margin-bottom":"1rem"}},Sl={style:{display:"flex","flex-flow":"column",gap:"1rem"}},Pl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},Ml={key:0,style:{display:"flex","flex-flow":"column",gap:"0.5rem",padding:"10px",border:"1px solid #ccc","border-radius":"10px"}},El={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},Rl=["src","alt"],$l=["onClick"],Ul={key:0,style:{"text-align":"center"}},jl={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem",border:"1px solid #ccc",padding:"20px","border-radius":"10px"}},Tl={key:0},Hl=["innerHTML"],Ll={key:1},Il={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem",padding:"20px",border:"1px solid #ccc","border-radius":"10px"}},zl={key:0},Al=["innerHTML"],Bl={key:1},Dl={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem"}},Gl={key:1,style:{border:"1px solid #ccc",padding:"15px","border-radius":"5px",display:"flex","flex-flow":"column",gap:"1rem"}},Jl={style:{width:"50%"}},Kl=["innerHTML"],Fl={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"0.3rem"}},ql={key:2,style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},Ql={style:{display:"flex","flex-flow":"column",gap:"1rem"}},Nl={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between",width:"100%","align-items":"center"}},Ol={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},Xl=["innerHTML","onFocusout"],Wl={key:0,style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},Yl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},Zl=["innerHTML"],U=5,et=ka({__name:"Questions",setup(L){const C=O(),D=p(!1),w=p(""),j=p(""),E=p([]),be=p([]),m=xa(),Me=_a(),Y=p([]),Z=p(!1),y=p([]),I=p(""),V=p(!1),v=p({image:[],answers:y.value,id_category:w.value,reference:"",id_materi:"",soalRaw:"",discussionRaw:"",soalParsed:"",discussionParsed:""});X(()=>y.value,()=>{v.value.answers=y.value},{deep:!0,immediate:!0});const Ee=()=>{k().getCategories({search_key:""}).then(l=>{var e,o;E.value=l,be.value=l,j.value=((e=l[0])==null?void 0:e._id)||"",w.value=((o=l[0])==null?void 0:o._id)||""}).catch(l=>{console.error(l),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengambil kategori soal",life:2e3})})},Re=()=>{if(w.value)D.value=!0;else{m.add({severity:"warn",summary:"Peringatan",detail:"Silakan pilih kategori soal terlebih dahulu",life:2e3});return}},$e=()=>{if(!I.value){m.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(y.value.length>=U){m.add({severity:"warn",summary:"Peringatan",detail:`Jumlah jawaban tidak boleh lebih dari ${U}`,life:2e3});return}const l=Math.random().toString(36).substring(2,15);y.value.push({value:I.value,is_correct:!1,id_answer:l}),I.value=""},Ue=l=>{const e=y.value.indexOf(l);e!==-1&&y.value.splice(e,1)},je=l=>{l.clipboardData.getData("text").split(`
`).map(a=>a.trim()).filter(a=>a!=="").forEach(async a=>{const t=Math.random().toString(36).substring(2,15);y.value.push({value:C.parse(a).html,is_correct:!1,id_answer:t})}),I.value="",l.preventDefault()},Te=l=>{y.value.forEach(e=>{e.is_correct=!1}),l.is_correct=!l.is_correct},He=l=>{const e=l.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=t=>{const d=Math.random().toString(36).substring(2,15);v.value.image.push({id:d,src:t.target.result})},a.readAsDataURL(o),l.target.value=""})},Le=l=>{l>=0&&l<v.value.image.length&&v.value.image.splice(l,1)},Ie=()=>{if(v.value.soalRaw.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}if(v.value.soalRaw.trim().length<10){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak valid!",life:2e3});return}if(y.value.length<U){m.add({severity:"warn",summary:"Peringatan",detail:`Minimal ${U} jawaban harus ada`,life:2e3});return}if(y.value.length>U){m.add({severity:"warn",summary:"Peringatan",detail:`Maksimal ${U} jawaban yang diperbolehkan`,life:2e3});return}if(y.value.filter(l=>l.is_correct).length===0){m.add({severity:"warn",summary:"Peringatan",detail:"Satu jawaban harus benar",life:2e3});return}if(v.value.discussionRaw.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Pembahasan tidak boleh kosong",life:2e3});return}if(v.value.id_materi===""){m.add({severity:"warn",summary:"Peringatan",detail:"Materi tidak boleh kosong",life:2e3});return}k().addSoal(v.value).then(l=>{M(),v.value.soal="",v.value.image=[],v.value.answers=[],y.value=[],I.value="",m.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil disimpan",life:2e3}),D.value=!1}).catch(l=>{console.error(l),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal menyimpan soal",life:2e3})}),console.log(v)},M=()=>{const l={id_category:j.value};k().getSoal(l).then(e=>{Y.value=e}).catch(e=>{console.error(e),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengambil soal",life:2e3})})},ze=l=>{Me.require({message:"Apakah Anda yakin ingin menghapus soal ini?",header:"Konfirmasi Hapus Soal",accept:()=>{k().deleteSoal({_id:l._id}).then(()=>{M(),m.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil dihapus",life:2e3})}).catch(e=>{console.error(e),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal menghapus soal",life:2e3})})},rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Hapus",severity:"danger"}})},Ae=(l,e,o)=>{const a={id_category:l.id_category,id_answer:o,id_question:l._id};k().updateAnswerSetCorrect(a).then(()=>{m.add({severity:"success",summary:"Berhasil",detail:"Jawaban berhasil ditandai sebagai benar",life:2e3}),M()}).catch(t=>{console.error(t),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal menandai jawaban sebagai benar",life:2e3})})},ee=p(!1),z=p(""),ue=p(""),Be=l=>{ee.value=!0,z.value=l.soalRaw,ue.value=l._id},De=async()=>{if(z.value.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}let l=[];const o=z.value.split(`
`).filter(t=>t.trim()!=="");if(o.length===0)return;for(const t of o)try{const d=O().parse(t);l.push(d.html)}catch(d){console.error("Error parsing LaTeX:",d)}const a={_id:ue.value,soalRaw:z.value,soalParsed:l};k().updateQuestion(a).then(()=>{ee.value=!1,m.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil diperbarui",life:2e3}),M(),z.value="",ue.value=""}).catch(t=>{console.error(t),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui soal",life:2e3})})},ae=p(!1),T=p(""),me=p(""),we=l=>{ae.value=!0,T.value=l.discussionRaw,me.value=l._id},Ge=async()=>{if(T.value.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}let l=[];const o=T.value.split(`
`).filter(t=>t.trim()!=="");if(o.length===0)return;for(const t of o)try{const d=O().parse(t);l.push(d.html)}catch(d){console.error("Error parsing LaTeX:",d)}const a={_id:me.value,discussionRaw:T.value,discussionParsed:l};k().updateQuestion(a).then(()=>{ae.value=!1,m.add({severity:"success",summary:"Berhasil",detail:"Pembahasan berhasil diperbarui",life:2e3}),M(),T.value="",me.value=""}).catch(t=>{console.error(t),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui Pembahasan",life:2e3})})},F=p(!1),H=p([]),ce=p(""),he=(l,e)=>{H.value=[],ce.value=l._id,l.images.map(o=>{H.value.push({id_question:l._id,id_image:o.id,filename:o.src})}),F.value=!0,console.log(H.value)},Je=(l,e)=>{const o={id_question:l.id_question,id_image:l.id_image};k().updateDeleteImage(o).then(()=>{H.value.splice(e,1),m.add({severity:"success",summary:"Berhasil",detail:"Gambar berhasil dihapus",life:2e3}),console.log(H.value)}).catch(a=>{console.error(a),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal menghapus gambar",life:2e3})})},S=p([]),Ke=l=>{const e=l.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=t=>{const d=Math.random().toString(36).substring(2,15);S.value.push({id:d,src:t.target.result})},a.readAsDataURL(o),l.target.value=""})},Fe=l=>{l>=0&&l<S.value.length&&S.value.splice(l,1)},qe=()=>{S.value=[]},Qe=()=>{if(S.value.length===0){m.add({severity:"warn",summary:"Peringatan",detail:"Tidak ada gambar yang dipilih untuk diunggah",life:2e3});return}const l={id_question:ce.value,images:S.value.map(e=>({src:e.src,id:e.id}))};k().uploadImageEdit(l).then(()=>{S.value=[],F.value=!1,m.add({severity:"success",summary:"Berhasil",detail:"Gambar berhasil diunggah",life:2e3}),M()}).catch(e=>{console.error(e),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengunggah gambar",life:2e3})})},le=p([]),Ne=()=>{Ea().getMateri().then(l=>{le.value=l.map(e=>({name:e.name,value:e._id}))}).catch(l=>{m.add({severity:"error",summary:"Error",detail:"Gagal mengambil data materi",life:3e3})})},te=p(!1),se=p(!1),Oe=async()=>{if(v.value.soalRaw.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}if(v.value.soalRaw.trim().length<10){m.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak valid!",life:2e3});return}let l=[];const o=v.value.soalRaw.split(`
`).filter(a=>a.trim()!=="");if(o.length!==0){for(const a of o)try{const t=O().parse(a);l.push(t.html)}catch(t){console.error("Error parsing LaTeX:",t)}v.value.soalParsed=l,te.value=!1}},Xe=async()=>{if(v.value.discussionRaw.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Pembahasan tidak boleh kosong",life:2e3});return}let l=[];const o=v.value.discussionRaw.split(`
`).filter(a=>a.trim()!=="");if(o.length!==0){for(const a of o)try{const t=O().parse(a);l.push(t.html)}catch(t){console.error("Error parsing LaTeX:",t)}v.value.discussionParsed=l,se.value=!1}},We=(l,e,o)=>{const a={_id:e,id_materi:l.toString(),materi_name:o};k().updateQuestion(a).then(()=>{m.add({severity:"success",summary:"Berhasil",detail:"Materi berhasil diperbarui",life:3e3}),M()}).catch(t=>{m.add({severity:"error",summary:"Error",detail:"Gagal memperbarui materi",life:3e3})})},q=p(""),b=p([]),Q=p(!1),A=p(""),Ye=l=>{q.value=l._id,b.value=l.answers.map(e=>({value:e.value,is_correct:e.is_correct,id_answer:e.id_answer})),Q.value=!0},Ze=l=>{l.clipboardData.getData("text").split(`
`).map(a=>a.trim()).filter(a=>a!=="").forEach(async a=>{const t=Math.random().toString(36).substring(2,15);b.value.push({value:C.parse(a).html,is_correct:!1,id_answer:t})}),A.value="",l.preventDefault()},ea=l=>{l>=0&&l<b.value.length&&b.value.splice(l,1)},aa=()=>{if(!A.value){m.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(b.value.length>=U){m.add({severity:"warn",summary:"Peringatan",detail:`Jumlah jawaban tidak boleh lebih dari ${U}`,life:2e3});return}const l=Math.random().toString(36).substring(2,15);b.value.push({value:C.parse(A.value).html,is_correct:!1,id_answer:l}),A.value=""},la=l=>{b.value.forEach(e=>{e.is_correct=!1}),b.value[l].is_correct=!0},ta=(l,e)=>{const o=e.target.innerHTML;if(!o){m.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(o.trim()===""){m.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3}),e.target.focus();return}b.value[l].value=e.target.innerHTML},sa=()=>{const l={_id:q.value,answers:b.value.map(e=>({value:e.value,is_correct:e.is_correct,id_answer:e.id_answer}))};k().updateQuestion(l).then(()=>{Q.value=!1,m.add({severity:"success",summary:"Berhasil",detail:"Jawaban berhasil diperbarui",life:2e3}),M(),b.value=[],q.value="",A.value=""}).catch(e=>{console.error(e),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui jawaban",life:2e3})})};X(()=>F.value,l=>{l||(H.value=[],S.value=[],ce.value="",M())}),X(()=>Z.value,l=>{l||(v.value.image=[])}),X(()=>w.value,()=>{v.value.id_category=w.value}),X(()=>j.value,()=>{M()});function oe(l){const e=ja(l);return Ra(e)}const pe=p(!1),ie=p(""),ke=p(""),oa=l=>{ke.value=l,ie.value="";const e=l.soalRaw,o=l.answers.filter(t=>t.is_correct),a={question:e,answer:o[0].value,image:l.images[0]!==void 0?l.images[0].src:null};ye.sendRecipe(a),pe.value=!0};ye.setOnDelta(l=>{ie.value+=l});const ia=()=>{we(ke.value),T.value=ie.value};Ca(()=>{Ee(),Ne(),ye.connectHandler()});const ve=p(""),fe=p(!1),xe=p(!1),G=p([]);p([]);const na=()=>{const l=Math.random().toString(36).substring(2,15),e=JSON.parse(ve.value);Object.keys(e).forEach(o=>{const a=e[o].question||"",t=oe(a),d=w.value,h="-",re=[],fa="-",ga="",ya="",ba=e[o].answers.map(Ve=>({value:Ve.value||"",is_correct:Ve.isCorrect||!1,id_answer:l}));G.value.push({id:l,soalRaw:a,soalParsed:t,discussionRaw:h,id_category:d,discussionParsed:fa,image:re,reference:ga,id_materi:ya,answers:ba})}),xe.value=!0},ra=(l,e,o)=>{const a=o.target.innerHTML;l.answers[e].value=a},da=(l,e)=>{const o=e.target.innerHTML;l.soalRaw=o,l.soalParsed=oe(o),console.log(l)},ne=p(!1),ua=p([]),_e=p(0),ma=(l,e)=>{ua.value=l,_e.value=e,ne.value=!0},ca=l=>{const e=l.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=t=>{const d=Math.random().toString(36).substring(2,15);G.value[_e.value].image.push({id:d,src:t.target.result})},a.readAsDataURL(o),l.target.value=""})},pa=(l,e)=>{G.value[l].images.splice(e,1)},va=(l,e)=>{k().addSoal(e).then(o=>{M(),m.add({severity:"success",summary:"Berhasil",detail:`Soal ${l+1} berhasil disimpan`,life:2e3}),G.value.splice(l,1)}).catch(o=>{console.error(o),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal menyimpan soal",life:2e3})})},Ce=(l,e)=>{const o={_id:l._id,active:e};k().updateQuestion(o).then(()=>{m.add({severity:"success",summary:"Berhasil",detail:`Soal berhasil ${l.active?"diaktifkan":"dinonaktifkan"}`,life:2e3})}).catch(a=>{console.error(a),m.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui status soal",life:2e3})})};return(l,e)=>{const o=Va("fasicon");return r(),u(x,null,[s(Se,{"content-title":"Kelola Soal"},{default:c(()=>[n("div",Ha,[s(i(J),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),options:E.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px"}},null,8,["modelValue","options"]),s(i(g),{onClick:Re},{default:c(()=>[s(o,{icon:"plus"}),e[31]||(e[31]=f(" Buat Soal"))]),_:1}),s(i(g),{onClick:e[1]||(e[1]=a=>fe.value=!0)},{default:c(()=>[s(o,{icon:"upload"}),e[32]||(e[32]=f(" Bulk Upload"))]),_:1})])]),_:1}),s(Se,{"content-title":"List Soal",style:{"margin-top":"2rem"}},{default:c(()=>[n("div",La,[s(i(J),{modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=a=>j.value=a),options:be.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px","margin-bottom":"1rem"}},null,8,["modelValue","options"]),n("div",Ia,[e[33]||(e[33]=n("label",null,"Mode Edit:",-1)),s(i(de),{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=a=>V.value=a),"on-label":"Edit Mode","off-label":"View Mode",style:{"margin-left":"1rem"}},null,8,["modelValue"])])]),n("p",za,[s(o,{icon:"file-text"}),f("   "+B(Y.value.length)+" soal tersedia pada kategori ini",1)]),s(i(K)),Y.value.length>0?(r(),R(i(ha),{key:0,value:Y.value,paginator:!0,rows:50,"rows-per-page-options":[10,20,50],style:{width:"100%"}},{default:c(()=>[s(i(N),{header:"No",style:{width:"100px"}},{body:c(({data:a,index:t})=>[n("span",null,B(t+1),1)]),_:1}),s(i(N),{header:"Soal",style:{width:"60%","word-break":"break-word"}},{body:c(({data:a})=>[n("div",Aa,[a.images.length>0?(r(),u("span",Ba,[s(o,{icon:"image"}),e[34]||(e[34]=f()),n("b",null,"Soal berisi "+B(a.images.length)+" gambar",1),e[35]||(e[35]=f("  ·  ")),V.value?(r(),u("a",{key:0,onClick:t=>he(a,t),href:"javascript:;",style:{color:"orange"}},[s(o,{icon:"edit"})],8,Da)):_("",!0)])):(r(),u("span",Ga,[e[36]||(e[36]=n("b",null,"Soal tanpa gambar",-1)),e[37]||(e[37]=f("  ·  ")),n("a",{onClick:t=>he(a,t),href:"javascript:;",style:{color:"orange"}},[s(o,{icon:"edit"})],8,Ja)]))]),n("div",Ka,[(r(!0),u(x,null,P(a.soalParsed,(t,d)=>(r(),u("div",{key:d,style:{"font-size":"14px"}},[n("span",{innerHTML:t},null,8,Fa)]))),128)),n("div",qa,[V.value?(r(),u("a",{key:0,onClick:t=>Be(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[38]||(e[38]=f(" Edit Soal"))],8,Qa)):_("",!0),V.value?(r(),u("a",{key:1,onClick:t=>we(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[39]||(e[39]=f(" Edit Pembahasan"))],8,Na)):_("",!0),V.value?(r(),u("a",{key:2,onClick:t=>oa(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[40]||(e[40]=f(" Generate Pembahasan"))],8,Oa)):_("",!0)])]),s(i(K)),e[42]||(e[42]=n("div",{style:{"margin-bottom":"0.2rem","font-size":"12px",color:"orange"}},[n("b",null,"Jawaban:")],-1)),n("div",Xa,[(r(!0),u(x,null,P(a.answers,(t,d)=>(r(),u("div",{title:"Double-click untuk menandai jawaban benar (Mode edit aktif)",key:d,onDblclick:h=>V.value?Ae(a,h,t.id_answer):null,style:Sa([{"font-size":"12px",padding:"7px",background:"#eee",cursor:"pointer"},{background:t.is_correct?"#d4edda":"#eeeeee",color:t.is_correct?"#155724":"#444"}])},[n("span",{style:{cursor:"text"},innerHTML:t.value},null,8,Ya)],44,Wa))),128))]),V.value?(r(),u("a",{key:0,onClick:t=>Ye(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px","margin-top":"0.5rem",display:"block"}},[s(o,{icon:"edit"}),e[41]||(e[41]=f(" Edit Jawaban"))],8,Za)):_("",!0)]),_:1}),s(i(N),{header:"Materi"},{body:c(({data:a})=>[V.value?(r(),R(i(J),{key:0,onChange:t=>We(a.id_materi,a._id,a.materi_name),modelValue:a.id_materi,"onUpdate:modelValue":t=>a.id_materi=t,options:le.value,"option-label":"name","option-value":"value",placeholder:"Pilih Materi",style:{width:"190px"}},null,8,["onChange","modelValue","onUpdate:modelValue","options"])):(r(),u("span",el,B(a.materi_name),1))]),_:1}),s(i(N),{header:"Aktif"},{body:c(({data:a})=>[a.active?(r(),R(i(de),{key:1,modelValue:a.active,"onUpdate:modelValue":t=>a.active=t,disabled:!V.value,onChange:t=>Ce(a,!1),"on-label":"Aktif","off-label":"Nonaktif"},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):(r(),R(i(de),{key:0,modelValue:a.active,"onUpdate:modelValue":t=>a.active=t,disabled:!V.value,onChange:t=>Ce(a,!0),"on-label":"Aktif","off-label":"Nonaktif"},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]))]),_:1}),s(i(N),{header:"Aksi",style:{width:"20%"}},{body:c(({data:a})=>[n("div",al,[s(i(g),{disabled:!V.value,onClick:t=>ze(a),class:"p-button-danger p-button-outlined",style:{"font-size":"12px"}},{default:c(()=>[s(o,{icon:"trash"}),e[43]||(e[43]=f(" Hapus"))]),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["value"])):(r(),u("p",ll,[s(o,{icon:"inbox"}),e[44]||(e[44]=f(" Belum ada soal yang tersedia untuk kategori ini"))]))]),_:1}),s(i($),{visible:ne.value,"onUpdate:visible":e[6]||(e[6]=a=>ne.value=a),modal:"",header:"Attach Image",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[n("div",tl,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[4]||(e[4]=a=>ca(a))},null,32),s(i(g),{style:{"margin-top":"1rem",width:"fit-content"},onClick:e[5]||(e[5]=a=>ne.value=!1)},{default:c(()=>[s(o,{icon:"save"}),e[45]||(e[45]=f(" Attach"))]),_:1})])]),_:1},8,["visible"]),s(i($),{visible:fe.value,"onUpdate:visible":e[8]||(e[8]=a=>fe.value=a),modal:"",header:"Bulk Upload",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[xe.value?(r(),u("div",ol,[(r(!0),u(x,null,P(G.value,(a,t)=>(r(),u("div",{key:t,style:{display:"flex","flex-flow":"column",gap:"0.4rem",border:"1px solid #ccc",padding:"15px"}},[n("div",il,[n("h2",nl,B(t+1),1),n("div",rl,[s(i(g),{onClick:d=>ma(a,t),style:{"font-size":"11px"}},{default:c(()=>[s(o,{icon:"image"})]),_:2},1032,["onClick"]),s(i(g),{class:"p-button-danger",style:{"font-size":"11px"},onClick:d=>G.value.splice(t,1)},{default:c(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]),n("div",dl,[(r(!0),u(x,null,P(a.image,(d,h)=>(r(),u("img",{key:h,src:d.src,alt:`Image ${h+1}`,onClick:re=>pa(t,h),style:{width:"75px",cursor:"pointer",height:"75px","object-fit":"contain",border:"1px solid #ccc"}},null,8,ul))),128))]),n("div",{contenteditable:"true",spellcheck:"false",onFocusout:d=>da(a,d),innerHTML:oe(a.soalRaw)},null,40,ml),n("ul",cl,[(r(!0),u(x,null,P(a.answers,(d,h)=>(r(),u("li",{key:h},[n("span",{contenteditable:"true",spellcheck:"false",onKeyup:re=>ra(a,h,re),innerHTML:d.value},null,40,pl),e[47]||(e[47]=f("  ")),d.is_correct?(r(),R(o,{key:0,icon:"check-circle",style:{color:"green"}})):_("",!0)]))),128))]),s(i(K)),n("div",vl,[s(i(J),{modelValue:a.id_category,"onUpdate:modelValue":d=>a.id_category=d,options:E.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s(i(J),{modelValue:a.id_materi,"onUpdate:modelValue":d=>a.id_materi=d,options:le.value,"option-label":"name","option-value":"value",placeholder:"Pilih Materi Soal",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s(i(g),{onClick:d=>va(t,a)},{default:c(()=>[s(o,{icon:"save"}),e[48]||(e[48]=f(" Commit"))]),_:2},1032,["onClick"])])]))),128))])):(r(),u("div",sl,[s(i(W),{modelValue:ve.value,"onUpdate:modelValue":e[7]||(e[7]=a=>ve.value=a),rows:"5",cols:"30",placeholder:"Masukkan soal disini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem",width:"fit-content"},onClick:na},{default:c(()=>[s(o,{icon:"save"}),e[46]||(e[46]=f(" Parse JSON"))]),_:1})]))]),_:1},8,["visible"]),s(i($),{visible:ee.value,"onUpdate:visible":e[10]||(e[10]=a=>ee.value=a),modal:"",header:"Edit Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[s(i(W),{modelValue:z.value,"onUpdate:modelValue":e[9]||(e[9]=a=>z.value=a),rows:"5",cols:"30",placeholder:"Masukkan soal disini...",style:{width:"100%","margin-bottom":"1rem"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:De},{default:c(()=>[s(o,{icon:"save"}),e[49]||(e[49]=f(" Perbarui Soal"))]),_:1})]),_:1},8,["visible"]),s(i($),{visible:ae.value,"onUpdate:visible":e[12]||(e[12]=a=>ae.value=a),modal:"",header:"Edit Pembahasan",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[s(i(W),{modelValue:T.value,"onUpdate:modelValue":e[11]||(e[11]=a=>T.value=a),rows:"5",cols:"30",placeholder:"Masukkan pembahasan disini...",style:{width:"100%","margin-bottom":"1rem"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Ge},{default:c(()=>[s(o,{icon:"save"}),e[50]||(e[50]=f(" Perbarui Pembahasan"))]),_:1})]),_:1},8,["visible"]),s(i($),{visible:F.value,"onUpdate:visible":e[14]||(e[14]=a=>F.value=a),modal:"",header:"Gambar Soal",style:{width:"40rem"},maximizable:!0,draggable:!1},{default:c(()=>[n("div",fl,[H.value.length>0?(r(),u("div",gl,[(r(!0),u(x,null,P(H.value,(a,t)=>(r(),u("div",{key:t,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:i(Pa).baseImage+a.filename,alt:`Image ${t+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,yl),s(i(g),{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px","font-size":"11px"},type:"button",onClick:d=>Je(a,t)},{default:c(()=>e[51]||(e[51]=[f("Hapus")])),_:2},1032,["onClick"])]))),128))])):(r(),u("div",bl,"Belum ada gambar soal. Silahkan unggah gambar")),n("div",wl,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[13]||(e[13]=a=>Ke(a))},null,32),n("div",hl,[(r(!0),u(x,null,P(S.value,(a,t)=>(r(),u("div",{key:t,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","align-items":"center","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:a.src,alt:`Image ${t+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,kl),n("button",{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px"},type:"button",onClick:d=>Fe(t)},"Hapus",8,xl)]))),128))]),S.value.length===0?(r(),u("div",_l,[s(o,{icon:"inbox"}),e[52]||(e[52]=f(" Tidak ada gambar dipilih"))])):_("",!0)]),n("div",Cl,[s(i(g),{disabled:!S.value.length,onClick:Qe,class:"p-button-success",style:{width:"fit-content","margin-top":"1rem"}},{default:c(()=>[s(o,{icon:"upload"}),e[53]||(e[53]=f(" Unggah Gambar "))]),_:1},8,["disabled"]),s(i(g),{disabled:!S.value.length,onClick:qe,class:"p-button-secondary p-button-outlined p-button-danger",style:{width:"fit-content","margin-top":"1rem"}},{default:c(()=>[s(o,{icon:"trash"}),e[54]||(e[54]=f(" Hapus Semua "))]),_:1},8,["disabled"])])])]),_:1},8,["visible"]),s(i($),{visible:D.value,"onUpdate:visible":e[22]||(e[22]=a=>D.value=a),modal:"",header:"Buat Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>{var a;return[n("h3",Vl,B(w.value?`Kategori ${(a=E.value.find(t=>t._id===w.value))==null?void 0:a.name}`:"Pilih kategori soal terlebih dahulu"),1),s(i(K)),n("div",Sl,[n("div",Pl,[e[55]||(e[55]=n("label",null,"Soal Bergambar",-1)),e[56]||(e[56]=f()),s(i(de),{modelValue:Z.value,"onUpdate:modelValue":e[15]||(e[15]=t=>Z.value=t),"on-label":"Dengan Gambar","off-label":"Tanpa Gambar"},null,8,["modelValue"])]),Z.value?(r(),u("div",Ml,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[16]||(e[16]=t=>He(t))},null,32),n("div",El,[(r(!0),u(x,null,P(v.value.image,(t,d)=>(r(),u("div",{key:d,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","align-items":"center","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:t.src,alt:`Image ${d+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,Rl),n("button",{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px"},type:"button",onClick:h=>Le(d)},"Hapus",8,$l)]))),128))]),v.value.image.length===0?(r(),u("div",Ul,[s(o,{icon:"inbox"}),e[57]||(e[57]=f(" Tidak ada gambar dipilih"))])):_("",!0)])):_("",!0),n("div",jl,[e[59]||(e[59]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Soal")],-1)),v.value.soalParsed.length>0?(r(),u("div",Tl,[(r(!0),u(x,null,P(v.value.soalParsed,(t,d)=>(r(),u("div",{key:d,innerHTML:t},null,8,Hl))),128))])):(r(),u("span",Ll,"Buat soal terlebih dahulu...")),s(i(K)),s(i(g),{onClick:e[17]||(e[17]=t=>te.value=!0),style:{width:"250px"}},{default:c(()=>[s(o,{icon:"edit"}),e[58]||(e[58]=f(" Buat/Edit Soal"))]),_:1})]),n("div",Il,[e[61]||(e[61]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Pembahasan")],-1)),v.value.discussionParsed.length>0?(r(),u("div",zl,[(r(!0),u(x,null,P(v.value.discussionParsed,(t,d)=>(r(),u("div",{key:d,innerHTML:t},null,8,Al))),128))])):(r(),u("span",Bl,"Buat pembahasan terlebih dahulu...")),s(i(K)),s(i(g),{onClick:e[18]||(e[18]=t=>se.value=!0),style:{width:"250px"}},{default:c(()=>[s(o,{icon:"edit"}),e[60]||(e[60]=f(" Buat/Edit Pembahasan"))]),_:1})]),n("div",Dl,[e[62]||(e[62]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Materi")],-1)),s(i(J),{modelValue:v.value.id_materi,"onUpdate:modelValue":e[19]||(e[19]=t=>v.value.id_materi=t),options:le.value,"option-label":"name","option-value":"value",placeholder:"Pilih materi",style:{width:"100%"}},null,8,["modelValue","options"])]),s(i(wa),null,{default:c(()=>[e[63]||(e[63]=n("label",null,"Referensi",-1)),s(i(ge),{style:{width:"100%"},modelValue:v.value.reference,"onUpdate:modelValue":e[20]||(e[20]=t=>v.value.reference=t),placeholder:"Masukkan referensi (opsional)"},null,8,["modelValue"])]),_:1}),y.value.length>0?(r(),u("div",Gl,[(r(!0),u(x,null,P(y.value,(t,d)=>(r(),u("div",{key:d,style:{width:"100%",display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"space-between","border-bottom":"1px solid #ccc","padding-bottom":"10px","padding-top":"10px"}},[n("span",Jl,[t.is_correct?(r(),R(o,{key:0,icon:"check",style:{color:"green"}})):(r(),R(o,{key:1,icon:"times",style:{color:"red"}})),n("span",{style:{"margin-left":"0.5rem"},innerHTML:t.value},null,8,Kl)]),n("div",Fl,[s(i(g),{style:{"font-size":"11.5px"},onClick:h=>Te(t),class:Ma({"p-button-success":t.is_correct,"p-button-secondary":!t.is_correct})},{default:c(()=>[n("b",null,B(t.is_correct?"Jawaban Benar":"Jawaban Salah"),1)]),_:2},1032,["onClick","class"]),s(i(g),{onClick:h=>Ue(t),class:"p-button-outlined",style:{"font-size":"10px",color:"red"}},{default:c(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]))),128))])):_("",!0),y.value.length<U?(r(),u("div",ql,[s(i(ge),{onPaste:je,modelValue:I.value,"onUpdate:modelValue":e[21]||(e[21]=t=>I.value=t),placeholder:"Tambah jawaban"},null,8,["modelValue"]),s(i(g),{onClick:$e},{default:c(()=>[s(o,{icon:"plus"})]),_:1})])):_("",!0),s(i(g),{onClick:Ie,class:"p-button-success",style:{width:"fit-content"}},{default:c(()=>[s(o,{icon:"plus"}),e[64]||(e[64]=f(" Tambah & Simpan"))]),_:1})])]}),_:1},8,["visible"]),s(i($),{visible:Q.value,"onUpdate:visible":e[25]||(e[25]=a=>Q.value=a),modal:"",header:"Edit Jawaban",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[n("div",Ql,[(r(!0),u(x,null,P(b.value,(a,t)=>(r(),u("div",{key:t,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"0.5rem",padding:"5px","border-bottom":"1px solid #ccc"}},[n("div",Nl,[n("div",Ol,[a.is_correct?(r(),R(o,{key:0,icon:"check-circle",style:{color:"green"}})):(r(),R(o,{key:1,onClick:d=>la(t),icon:"times-circle",style:{color:"red",cursor:"pointer"}},null,8,["onClick"])),n("div",{contenteditable:"true",spellcheck:"false",innerHTML:a.value,onFocusout:d=>ta(t,d)},null,40,Xl)]),s(i(g),{onClick:d=>ea(t)},{default:c(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]))),128)),b.value.length<U?(r(),u("div",Wl,[s(i(ge),{onPaste:Ze,modelValue:A.value,"onUpdate:modelValue":e[23]||(e[23]=a=>A.value=a),placeholder:"Tambah jawaban"},null,8,["modelValue"]),s(i(g),{onClick:aa},{default:c(()=>[s(o,{icon:"plus"})]),_:1})])):_("",!0),n("div",Yl,[b.value.length>0&&b.value.some(a=>a.is_correct)?(r(),R(i(g),{key:0,onClick:sa,class:"p-button-success",disabled:!q.value,style:{width:"fit-content"},title:q.value?"Simpan jawaban yang telah diedit":"Tidak ada jawaban yang diedit"},{default:c(()=>[s(o,{icon:"save"}),e[65]||(e[65]=f(" Simpan Jawaban"))]),_:1},8,["disabled","title"])):_("",!0),s(i(g),{onClick:e[24]||(e[24]=a=>Q.value=!1),class:"p-button-secondary",style:{width:"fit-content"}},{default:c(()=>[s(o,{icon:"times"}),e[66]||(e[66]=f(" Batal"))]),_:1})])])]),_:1},8,["visible"]),s(i($),{visible:te.value,"onUpdate:visible":e[27]||(e[27]=a=>te.value=a),modal:"",header:"Buat Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[s(i(W),{modelValue:v.value.soalRaw,"onUpdate:modelValue":e[26]||(e[26]=a=>v.value.soalRaw=a),rows:"5",cols:"30",placeholder:"Masukkan soal di sini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Oe},{default:c(()=>[s(o,{icon:"save"}),e[67]||(e[67]=f(" Simpan Soal"))]),_:1})]),_:1},8,["visible"]),s(i($),{visible:se.value,"onUpdate:visible":e[29]||(e[29]=a=>se.value=a),modal:"",header:"Buat Pembahasan",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[s(i(W),{modelValue:v.value.discussionRaw,"onUpdate:modelValue":e[28]||(e[28]=a=>v.value.discussionRaw=a),rows:"5",cols:"30",placeholder:"Masukkan pembahasan di sini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Xe},{default:c(()=>[s(o,{icon:"save"}),e[68]||(e[68]=f(" Simpan Pembahasan"))]),_:1})]),_:1},8,["visible"]),s(i($),{visible:pe.value,"onUpdate:visible":e[30]||(e[30]=a=>pe.value=a),modal:"",header:"Hasil Diskusi",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:c(()=>[n("div",{innerHTML:oe(ie.value)},null,8,Zl),s(i(g),{onClick:ia,style:{"margin-top":"1rem"}},{default:c(()=>e[69]||(e[69]=[f("Gunakan Pembahasan")])),_:1})]),_:1},8,["visible"])],64)}}}),Mt=Ua(et,[["__scopeId","data-v-dd846aa7"]]);export{Mt as default};
