import{k as i}from"./katex-DhIX2AT_.js";/* empty css                  */import{h as d}from"./html2canvas.esm-BfYXEYrK.js";function p(s){let t=s;return t=t.replace(/√\(([^)]+)\)/g,(r,n)=>`\\sqrt{${n}}`),t=t.replace(/sqrt\(([^)]+)\)/gi,(r,n)=>`\\sqrt{${n}}`),t=t.replace(/\s*=\s*/," = "),t=t.replace(/([A-Za-z])_([A-Za-z]+)/g,(r,n,e)=>`${n}_{\\text{${e}}}`),t=t.replace(/(\d),(\d)/g,(r,n,e)=>`${n}.${e}`),t=t.replace(/\^(\d+)/g,"^{$1}"),t=t.replace(/\+/g," + ").replace(/-/g," - "),t=t.replace(/\s+/g," ").trim(),t}function A(s){const t=/v[_\w]*(?:\^\d+)?|√\([^)]*\)|sqrt\([^)]*\]|[A-Za-z0-9]+_[A-Za-z]+|\w+\s*=\s*[^.\n]+/g,r=[];let n=0,e;for(;(e=t.exec(s))!==null;){const o=e.index,a=e[0];o>n&&r.push({type:"text",content:s.slice(n,o)});const l=p(a.trim());r.push({type:"math",content:l}),n=t.lastIndex}return n<s.length&&r.push({type:"text",content:s.slice(n)}),r.length===0?[{type:"text",content:s}]:r}const u=()=>({parse:(r,n={throwOnError:!1})=>{const e=A(r),o=document.createElement("div");for(const a of e)if(a.type==="text")o.appendChild(document.createTextNode(a.content));else{const l=document.createElement("span");try{l.innerHTML=i.renderToString(a.content,{throwOnError:!!n.throwOnError,displayMode:!1})}catch{l.textContent=a.content,l.style.color="red"}o.appendChild(l)}return{html:o.innerHTML,segments:e.map(a=>({...a}))}},toPng:async(r,n={throwOnError:!1})=>{const e=document.createElement("div");e.setAttribute("aria-hidden","true"),e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.padding="6px 10px",e.style.background="white",e.style.display="inline-block",e.style.color="#000",e.style.fontSize="1rem",e.style.lineHeight="1.2";try{const o=i.renderToString(r,{throwOnError:!!n.throwOnError,displayMode:!1});return e.innerHTML=o,document.body.appendChild(e),await new Promise(c=>requestAnimationFrame(()=>{setTimeout(()=>c(),30)})),(await d(e,{backgroundColor:null,scale:window.devicePixelRatio||1,useCORS:!0})).toDataURL("image/png")}catch(o){if(n.throwOnError)throw o;return console.warn("LaTeX->PNG failed:",o),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII="}finally{e.parentElement&&document.body.removeChild(e)}}});export{u};
