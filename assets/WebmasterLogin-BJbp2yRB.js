import{s as f}from"./index-L43QG1jP.js";import{s as g}from"./index-rh8fCLP3.js";import{s as y}from"./index-piERbzvQ.js";import{s as x}from"./index-BQlK_Zsj.js";import{d as b,r as n,f as c,p as h,w as p,o as k,a as s,k as l,t as V,u as a,e as v,b as _,q as B,h as C}from"./index-bioeAiyt.js";import{u as U}from"./auth-BEVX74OP.js";import{a as M}from"./index-t--hEgTQ.js";import{B as N}from"./BaseWrapper-DWwmbP2P.js";import"./index-DhhDt_K-.js";import"./http-BlOruFeX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login"},W={style:{margin:"0",padding:"0"}},$={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},L={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},P={style:{display:"flex","flex-flow":"row wrap",gap:"5px"}},S={style:{display:"flex","flex-flow":"row nowrap","justify-content":"right"}},J=b({__name:"WebmasterLogin",setup(j){const t=n(!1),u=U(),d=c(),i=n(""),r=n("");B(),C();const w=async()=>{if(i.value===""||r.value===""){d.add({severity:"error",summary:"Opss",detail:"Mohon isi semua bidang",life:3e3});return}t.value=!0;const m={email:i.value,password:r.value,role:"webmaster"};await M.post(v.baseEnd+"/auth/login/webmaster",m).then(e=>{e.status==200&&(u.setToken(e.data.token),u.setUserId(e.data.user.id),d.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),t.value=!1,setTimeout(()=>{window.location.href="/sysadmin/home"},2e3))}).catch(e=>{d.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3}),t.value=!1})};return(m,e)=>(k(),h(N,null,{default:p(()=>[s("div",T,[s("div",null,[s("div",null,[e[4]||(e[4]=s("h1",{style:{margin:"0",padding:"0","font-size":"40px"}},"Masuk",-1)),s("p",W,"untuk melanjutkan ke "+V(a(v).appName)+" sebagai Webmaster",1)]),s("div",$,[l(a(f),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),style:{width:"350px",padding:"12px"},placeholder:"E-Mail"},null,8,["modelValue"])]),s("div",L,[l(a(f),{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),style:{width:"350px",padding:"12px"},type:"password",placeholder:"Password",minlength:"8"},null,8,["modelValue"])]),s("div",P,[l(a(g),{label:"Masuk sebagai Webmaster",onClick:w})])])]),l(a(y),{closable:!1,visible:t.value,"onUpdate:visible":e[3]||(e[3]=o=>t.value=o),modal:"",header:"Please wait",style:{width:"25rem"}},{default:p(()=>[e[6]||(e[6]=s("p",{style:{padding:"0","margin-top":"0px"}},"Authorizing...",-1)),l(a(x),{mode:"indeterminate",style:{height:"6px"}}),s("div",S,[l(a(g),{onClick:e[2]||(e[2]=o=>t.value=!1),style:{"margin-top":"1rem"}},{default:p(()=>e[5]||(e[5]=[_("Cancel")])),_:1})])]),_:1},8,["visible"])]),_:1}))}});export{J as default};
