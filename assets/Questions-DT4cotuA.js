import{C as Ce}from"./ContentWrapper-DBGTnP6y.js";import{q as S}from"./questionModel-B6nzhZ09.js";import{s as ba}from"./index-CZa0FNcp.js";import{s as ve}from"./index-Cu4XXnoU.js";import{s as g}from"./index-CcB3t-zi.js";import{s as re,a as wa}from"./index-DcSSPTs4.js";import{e as G}from"./index-DVvVa46w.js";import{u as O}from"./latextParser-Db3xJdvu.js";import{s as K}from"./index-u6uMTMgW.js";import{s as Se}from"./index-CIBhHnIh.js";import{r as c,d as ha,f as ka,Q as xa,S as N,i as _a,c as u,k as s,w as m,u as i,F as k,o as r,a as n,b as v,m as Ca,p as H,t as D,l as x,O as V,a6 as Sa,e as Va,n as Pa}from"./index-CTL3uMAw.js";import{s as X}from"./index-CrjkXRS7.js";import{u as Ma}from"./materiModel-3cKkqOCa.js";import{r as Ea}from"./markdown-DiUCvktl.js";import{s as R}from"./index-DQ8cLXqv.js";import{l as Ra}from"./index-BLRFddlS.js";import{_ as ja}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-t--hEgTQ.js";import"./index-6aE6aYUW.js";import"./index-BrTedIes.js";import"./index-DIEcY0n5.js";import"./index-BD4JFYyf.js";import"./index-7CsHJrCC.js";import"./katex-DhIX2AT_.js";/* empty css                  */import"./html2canvas.esm-BfYXEYrK.js";import"./_commonjsHelpers-Cpj98o6Y.js";function $a(L){let _=L;return _=_.replace(/(\d+)\s*(?:x|times)\s*(\d+)/gi,(A,w,$)=>`${w} \\cdot ${$}`),_}const Ve={socketURL:"https://api.imanextgencbt.id/discussion",socketPath:"/socket.io"},Ta=()=>{const L=c(null);let _=null;return{connectHandler:()=>{L.value=Ra(Ve.socketURL,{path:Ve.socketPath,auth:{token:localStorage.getItem("authToken")||""}}),L.value.on("connect",()=>{console.log("Connected to discussion socket"),L.value.on("disc:generate-result",M=>{_==null||_(M)})})},setOnDelta:M=>{_=M},sendRecipe:M=>{L.value.emit("disc:generate",M)}}},ge=Ta(),Ua={style:{display:"flex","flex-flow":"row nowra","align-items":"center","justify-content":"flex-start",gap:"0.4rem"}},Ha={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between"}},La={style:{display:"flex",padding:"8px"}},Ia={style:{"text-align":"center"}},za={style:{"margin-bottom":"0.5rem"}},Ba={key:0},Da=["onClick"],Aa={key:1},Ja=["onClick"],Ga={style:{"margin-bottom":"0.5rem",display:"flex","flex-flow":"column"}},Ka=["innerHTML"],Fa={style:{"margin-top":"1rem",display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},qa=["onClick"],Qa=["onClick"],Oa=["onClick"],Na={style:{display:"flex","flex-flow":"row wrap",gap:"0.15rem"}},Xa=["onDblclick"],Wa=["innerHTML"],Ya=["onClick"],Za={key:1},et={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},at={key:1},tt={style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},lt={key:0,style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},st={key:1,style:{display:"flex","flex-flow":"column",gap:"0.4rem"}},ot={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between",gap:"0.2rem"}},it={style:{margin:"0",padding:"0"}},nt={style:{display:"flex","flex-flow":"row nowrap",gap:"0.2rem"}},rt={style:{display:"flex","flex-flow":"row wrap",gap:"0.4rem"}},dt=["src","alt","onClick"],ut=["onFocusout","innerHTML"],mt={style:{margin:"0"}},pt=["onKeyup","innerHTML"],ct={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},ft={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},vt={key:0,style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center",width:"100%",padding:"10px",border:"1px solid #ccc","border-radius":"10px"}},gt=["src","alt"],yt={key:1,style:{"text-align":"center",width:"100%",padding:"10px"}},bt={style:{display:"flex","flex-flow":"column",gap:"0.5rem",padding:"10px",border:"1px solid #ccc","border-radius":"10px",width:"100%"}},wt={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},ht=["src","alt"],kt=["onClick"],xt={key:0,style:{"text-align":"center"}},_t={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},Ct={style:{margin:"0",padding:"0","margin-bottom":"1rem"}},St={style:{display:"flex","flex-flow":"column",gap:"1rem"}},Vt={style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},Pt={key:0,style:{display:"flex","flex-flow":"column",gap:"0.5rem",padding:"10px",border:"1px solid #ccc","border-radius":"10px"}},Mt={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","justify-content":"center"}},Et=["src","alt"],Rt=["onClick"],jt={key:0,style:{"text-align":"center"}},$t={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem",border:"1px solid #ccc",padding:"20px","border-radius":"10px"}},Tt={key:0},Ut=["innerHTML"],Ht={key:1},Lt={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem",padding:"20px",border:"1px solid #ccc","border-radius":"10px"}},It={key:0},zt=["innerHTML"],Bt={key:1},Dt={style:{display:"flex","flex-flow":"column",gap:"0.5rem","margin-top":"1rem"}},At={key:1,style:{border:"1px solid #ccc",padding:"15px","border-radius":"5px",display:"flex","flex-flow":"column",gap:"1rem"}},Jt={style:{width:"50%"}},Gt=["innerHTML"],Kt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"0.3rem"}},Ft={key:2,style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},qt={style:{display:"flex","flex-flow":"column",gap:"1rem"}},Qt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between",width:"100%","align-items":"center"}},Ot={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},Nt=["innerHTML","onFocusout"],Xt={key:0,style:{display:"flex","flex-flow":"row nowrap",gap:"0.4rem"}},Wt={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},Yt=["innerHTML"],j=5,Zt=ha({__name:"Questions",setup(L){const _=O(),A=c(!1),w=c(""),$=c(""),M=c([]),ye=c([]),p=ka(),Pe=xa(),W=c([]),Y=c(!1),y=c([]),I=c(""),E=c(!1),f=c({image:[],answers:y.value,id_category:w.value,reference:"",id_materi:"",soalRaw:"",discussionRaw:"",soalParsed:"",discussionParsed:""});N(()=>y.value,()=>{f.value.answers=y.value},{deep:!0,immediate:!0});const Me=()=>{S().getCategories({search_key:""}).then(t=>{var e,o;M.value=t,ye.value=t,$.value=((e=t[0])==null?void 0:e._id)||"",w.value=((o=t[0])==null?void 0:o._id)||""}).catch(t=>{console.error(t),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengambil kategori soal",life:2e3})})},Ee=()=>{if(w.value)A.value=!0;else{p.add({severity:"warn",summary:"Peringatan",detail:"Silakan pilih kategori soal terlebih dahulu",life:2e3});return}},Re=()=>{if(!I.value){p.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(y.value.length>=j){p.add({severity:"warn",summary:"Peringatan",detail:`Jumlah jawaban tidak boleh lebih dari ${j}`,life:2e3});return}const t=Math.random().toString(36).substring(2,15);y.value.push({value:I.value,is_correct:!1,id_answer:t}),I.value=""},je=t=>{const e=y.value.indexOf(t);e!==-1&&y.value.splice(e,1)},$e=t=>{t.clipboardData.getData("text").split(`
`).map(a=>a.trim()).filter(a=>a!=="").forEach(async a=>{const l=Math.random().toString(36).substring(2,15);y.value.push({value:_.parse(a).html,is_correct:!1,id_answer:l})}),I.value="",t.preventDefault()},Te=t=>{y.value.forEach(e=>{e.is_correct=!1}),t.is_correct=!t.is_correct},Ue=t=>{const e=t.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=l=>{const d=Math.random().toString(36).substring(2,15);f.value.image.push({id:d,src:l.target.result})},a.readAsDataURL(o),t.target.value=""})},He=t=>{t>=0&&t<f.value.image.length&&f.value.image.splice(t,1)},Le=()=>{if(f.value.soalRaw.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}if(f.value.soalRaw.trim().length<10){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak valid!",life:2e3});return}if(y.value.length<j){p.add({severity:"warn",summary:"Peringatan",detail:`Minimal ${j} jawaban harus ada`,life:2e3});return}if(y.value.length>j){p.add({severity:"warn",summary:"Peringatan",detail:`Maksimal ${j} jawaban yang diperbolehkan`,life:2e3});return}if(y.value.filter(t=>t.is_correct).length===0){p.add({severity:"warn",summary:"Peringatan",detail:"Satu jawaban harus benar",life:2e3});return}if(f.value.discussionRaw.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Pembahasan tidak boleh kosong",life:2e3});return}if(f.value.id_materi===""){p.add({severity:"warn",summary:"Peringatan",detail:"Materi tidak boleh kosong",life:2e3});return}S().addSoal(f.value).then(t=>{P(),f.value.soal="",f.value.image=[],f.value.answers=[],y.value=[],I.value="",p.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil disimpan",life:2e3}),A.value=!1}).catch(t=>{console.error(t),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal menyimpan soal",life:2e3})}),console.log(f)},P=()=>{const t={id_category:$.value};S().getSoal(t).then(e=>{W.value=e}).catch(e=>{console.error(e),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengambil soal",life:2e3})})},Ie=t=>{Pe.require({message:"Apakah Anda yakin ingin menghapus soal ini?",header:"Konfirmasi Hapus Soal",accept:()=>{S().deleteSoal({_id:t._id}).then(()=>{P(),p.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil dihapus",life:2e3})}).catch(e=>{console.error(e),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal menghapus soal",life:2e3})})},rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Hapus",severity:"danger"}})},ze=(t,e,o)=>{const a={id_category:t.id_category,id_answer:o,id_question:t._id};S().updateAnswerSetCorrect(a).then(()=>{p.add({severity:"success",summary:"Berhasil",detail:"Jawaban berhasil ditandai sebagai benar",life:2e3}),P()}).catch(l=>{console.error(l),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal menandai jawaban sebagai benar",life:2e3})})},Z=c(!1),z=c(""),de=c(""),Be=t=>{Z.value=!0,z.value=t.soalRaw,de.value=t._id},De=async()=>{if(z.value.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}let t=[];const o=z.value.split(`
`).filter(l=>l.trim()!=="");if(o.length===0)return;for(const l of o)try{const d=O().parse(l);t.push(d.html)}catch(d){console.error("Error parsing LaTeX:",d)}const a={_id:de.value,soalRaw:z.value,soalParsed:t};S().updateQuestion(a).then(()=>{Z.value=!1,p.add({severity:"success",summary:"Berhasil",detail:"Soal berhasil diperbarui",life:2e3}),P(),z.value="",de.value=""}).catch(l=>{console.error(l),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui soal",life:2e3})})},ee=c(!1),T=c(""),ue=c(""),be=t=>{ee.value=!0,T.value=t.discussionRaw,ue.value=t._id},Ae=async()=>{if(T.value.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}let t=[];const o=T.value.split(`
`).filter(l=>l.trim()!=="");if(o.length===0)return;for(const l of o)try{const d=O().parse(l);t.push(d.html)}catch(d){console.error("Error parsing LaTeX:",d)}const a={_id:ue.value,discussionRaw:T.value,discussionParsed:t};S().updateQuestion(a).then(()=>{ee.value=!1,p.add({severity:"success",summary:"Berhasil",detail:"Pembahasan berhasil diperbarui",life:2e3}),P(),T.value="",ue.value=""}).catch(l=>{console.error(l),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui Pembahasan",life:2e3})})},F=c(!1),U=c([]),me=c(""),we=(t,e)=>{U.value=[],me.value=t._id,t.images.map(o=>{U.value.push({id_question:t._id,id_image:o.id,filename:o.src})}),F.value=!0,console.log(U.value)},Je=(t,e)=>{const o={id_question:t.id_question,id_image:t.id_image};S().updateDeleteImage(o).then(()=>{U.value.splice(e,1),p.add({severity:"success",summary:"Berhasil",detail:"Gambar berhasil dihapus",life:2e3}),console.log(U.value)}).catch(a=>{console.error(a),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal menghapus gambar",life:2e3})})},C=c([]),Ge=t=>{const e=t.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=l=>{const d=Math.random().toString(36).substring(2,15);C.value.push({id:d,src:l.target.result})},a.readAsDataURL(o),t.target.value=""})},Ke=t=>{t>=0&&t<C.value.length&&C.value.splice(t,1)},Fe=()=>{C.value=[]},qe=()=>{if(C.value.length===0){p.add({severity:"warn",summary:"Peringatan",detail:"Tidak ada gambar yang dipilih untuk diunggah",life:2e3});return}const t={id_question:me.value,images:C.value.map(e=>({src:e.src,id:e.id}))};S().uploadImageEdit(t).then(()=>{C.value=[],F.value=!1,p.add({severity:"success",summary:"Berhasil",detail:"Gambar berhasil diunggah",life:2e3}),P()}).catch(e=>{console.error(e),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal mengunggah gambar",life:2e3})})},ae=c([]),Qe=()=>{Ma().getMateri().then(t=>{ae.value=t.map(e=>({name:e.name,value:e._id}))}).catch(t=>{p.add({severity:"error",summary:"Error",detail:"Gagal mengambil data materi",life:3e3})})},te=c(!1),le=c(!1),Oe=async()=>{if(f.value.soalRaw.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak boleh kosong",life:2e3});return}if(f.value.soalRaw.trim().length<10){p.add({severity:"warn",summary:"Peringatan",detail:"Soal tidak valid!",life:2e3});return}let t=[];const o=f.value.soalRaw.split(`
`).filter(a=>a.trim()!=="");if(o.length!==0){for(const a of o)try{const l=O().parse(a);t.push(l.html)}catch(l){console.error("Error parsing LaTeX:",l)}f.value.soalParsed=t,te.value=!1}},Ne=async()=>{if(f.value.discussionRaw.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Pembahasan tidak boleh kosong",life:2e3});return}let t=[];const o=f.value.discussionRaw.split(`
`).filter(a=>a.trim()!=="");if(o.length!==0){for(const a of o)try{const l=O().parse(a);t.push(l.html)}catch(l){console.error("Error parsing LaTeX:",l)}f.value.discussionParsed=t,le.value=!1}},Xe=(t,e,o)=>{const a={_id:e,id_materi:t.toString(),materi_name:o};S().updateQuestion(a).then(()=>{p.add({severity:"success",summary:"Berhasil",detail:"Materi berhasil diperbarui",life:3e3}),P()}).catch(l=>{p.add({severity:"error",summary:"Error",detail:"Gagal memperbarui materi",life:3e3})})},q=c(""),b=c([]),Q=c(!1),B=c(""),We=t=>{q.value=t._id,b.value=t.answers.map(e=>({value:e.value,is_correct:e.is_correct,id_answer:e.id_answer})),Q.value=!0},Ye=t=>{t.clipboardData.getData("text").split(`
`).map(a=>a.trim()).filter(a=>a!=="").forEach(async a=>{const l=Math.random().toString(36).substring(2,15);b.value.push({value:_.parse(a).html,is_correct:!1,id_answer:l})}),B.value="",t.preventDefault()},Ze=t=>{t>=0&&t<b.value.length&&b.value.splice(t,1)},ea=()=>{if(!B.value){p.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(b.value.length>=j){p.add({severity:"warn",summary:"Peringatan",detail:`Jumlah jawaban tidak boleh lebih dari ${j}`,life:2e3});return}const t=Math.random().toString(36).substring(2,15);b.value.push({value:_.parse(B.value).html,is_correct:!1,id_answer:t}),B.value=""},aa=t=>{b.value.forEach(e=>{e.is_correct=!1}),b.value[t].is_correct=!0},ta=(t,e)=>{const o=e.target.innerHTML;if(!o){p.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3});return}if(o.trim()===""){p.add({severity:"warn",summary:"Peringatan",detail:"Jawaban tidak boleh kosong",life:2e3}),e.target.focus();return}b.value[t].value=e.target.innerHTML},la=()=>{const t={_id:q.value,answers:b.value.map(e=>({value:e.value,is_correct:e.is_correct,id_answer:e.id_answer}))};S().updateQuestion(t).then(()=>{Q.value=!1,p.add({severity:"success",summary:"Berhasil",detail:"Jawaban berhasil diperbarui",life:2e3}),P(),b.value=[],q.value="",B.value=""}).catch(e=>{console.error(e),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal memperbarui jawaban",life:2e3})})};N(()=>F.value,t=>{t||(U.value=[],C.value=[],me.value="",P())}),N(()=>Y.value,t=>{t||(f.value.image=[])}),N(()=>w.value,()=>{f.value.id_category=w.value}),N(()=>$.value,()=>{P()});function se(t){const e=$a(t);return Ea(e)}const pe=c(!1),oe=c(""),he=c(""),sa=t=>{he.value=t,oe.value="";const e=t.soalRaw,o=t.answers.filter(l=>l.is_correct),a={question:e,answer:o[0].value,image:t.images[0]!==void 0?t.images[0].src:null};ge.sendRecipe(a),pe.value=!0};ge.setOnDelta(t=>{oe.value+=t});const oa=()=>{be(he.value),T.value=oe.value};_a(()=>{Me(),Qe(),ge.connectHandler()});const ce=c(""),fe=c(!1),ke=c(!1),J=c([]);c([]);const ia=()=>{const t=Math.random().toString(36).substring(2,15),e=JSON.parse(ce.value);Object.keys(e).forEach(o=>{const a=e[o].question||"",l=se(a),d=w.value,h="-",ne=[],fa="-",va="",ga="",ya=e[o].answers.map(_e=>({value:_e.value||"",is_correct:_e.isCorrect||!1,id_answer:t}));J.value.push({id:t,soalRaw:a,soalParsed:l,discussionRaw:h,id_category:d,discussionParsed:fa,image:ne,reference:va,id_materi:ga,answers:ya})}),ke.value=!0},na=(t,e,o)=>{const a=o.target.innerHTML;t.answers[e].value=a},ra=(t,e)=>{const o=e.target.innerHTML;t.soalRaw=o,t.soalParsed=se(o),console.log(t)},ie=c(!1),da=c([]),xe=c(0),ua=(t,e)=>{da.value=t,xe.value=e,ie.value=!0},ma=t=>{const e=t.target.files;e.length>0&&Array.from(e).forEach(o=>{const a=new FileReader;a.onload=l=>{const d=Math.random().toString(36).substring(2,15);J.value[xe.value].image.push({id:d,src:l.target.result})},a.readAsDataURL(o),t.target.value=""})},pa=(t,e)=>{J.value[t].images.splice(e,1)},ca=(t,e)=>{S().addSoal(e).then(o=>{P(),p.add({severity:"success",summary:"Berhasil",detail:`Soal ${t+1} berhasil disimpan`,life:2e3}),J.value.splice(t,1)}).catch(o=>{console.error(o),p.add({severity:"error",summary:"Kesalahan",detail:"Gagal menyimpan soal",life:2e3})})};return(t,e)=>{const o=Ca("fasicon");return r(),u(k,null,[s(Ce,{"content-title":"Kelola Soal"},{default:m(()=>[n("div",Ua,[s(i(G),{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a),options:M.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px"}},null,8,["modelValue","options"]),s(i(g),{onClick:Ee},{default:m(()=>[s(o,{icon:"plus"}),e[31]||(e[31]=v(" Buat Soal"))]),_:1}),s(i(g),{onClick:e[1]||(e[1]=a=>fe.value=!0)},{default:m(()=>[s(o,{icon:"upload"}),e[32]||(e[32]=v(" Bulk Upload"))]),_:1})])]),_:1}),s(Ce,{"content-title":"List Soal",style:{"margin-top":"2rem"}},{default:m(()=>[n("div",Ha,[s(i(G),{modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=a=>$.value=a),options:ye.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px","margin-bottom":"1rem"}},null,8,["modelValue","options"]),n("div",La,[e[33]||(e[33]=n("label",null,"Mode Edit:",-1)),s(i(Se),{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=a=>E.value=a),"on-label":"Edit Mode","off-label":"View Mode",style:{"margin-left":"1rem"}},null,8,["modelValue"])])]),n("p",Ia,[s(o,{icon:"file-text"}),v("   "+D(W.value.length)+" soal tersedia pada kategori ini",1)]),s(i(K)),W.value.length>0?(r(),H(i(wa),{key:0,value:W.value,paginator:!0,rows:50,"rows-per-page-options":[10,20,50],style:{width:"100%"}},{default:m(()=>[s(i(re),{header:"No",style:{width:"100px"}},{body:m(({data:a,index:l})=>[n("span",null,D(l+1),1)]),_:1}),s(i(re),{header:"Soal",style:{width:"60%","word-break":"break-word"}},{body:m(({data:a})=>[n("div",za,[a.images.length>0?(r(),u("span",Ba,[s(o,{icon:"image"}),e[34]||(e[34]=v()),n("b",null,"Soal berisi "+D(a.images.length)+" gambar",1),e[35]||(e[35]=v("  ·  ")),E.value?(r(),u("a",{key:0,onClick:l=>we(a,l),href:"javascript:;",style:{color:"orange"}},[s(o,{icon:"edit"})],8,Da)):x("",!0)])):(r(),u("span",Aa,[e[36]||(e[36]=n("b",null,"Soal tanpa gambar",-1)),e[37]||(e[37]=v("  ·  ")),n("a",{onClick:l=>we(a,l),href:"javascript:;",style:{color:"orange"}},[s(o,{icon:"edit"})],8,Ja)]))]),n("div",Ga,[(r(!0),u(k,null,V(a.soalParsed,(l,d)=>(r(),u("div",{key:d,style:{"font-size":"14px"}},[n("span",{innerHTML:l},null,8,Ka)]))),128)),n("div",Fa,[E.value?(r(),u("a",{key:0,onClick:l=>Be(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[38]||(e[38]=v(" Edit Soal"))],8,qa)):x("",!0),E.value?(r(),u("a",{key:1,onClick:l=>be(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[39]||(e[39]=v(" Edit Pembahasan"))],8,Qa)):x("",!0),E.value?(r(),u("a",{key:2,onClick:l=>sa(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px"}},[s(o,{icon:"edit"}),e[40]||(e[40]=v(" Generate Pembahasan"))],8,Oa)):x("",!0)])]),s(i(K)),e[42]||(e[42]=n("div",{style:{"margin-bottom":"0.2rem","font-size":"12px",color:"orange"}},[n("b",null,"Jawaban:")],-1)),n("div",Na,[(r(!0),u(k,null,V(a.answers,(l,d)=>(r(),u("div",{title:"Double-click untuk menandai jawaban benar (Mode edit aktif)",key:d,onDblclick:h=>E.value?ze(a,h,l.id_answer):null,style:Sa([{"font-size":"12px",padding:"7px",background:"#eee",cursor:"pointer"},{background:l.is_correct?"#d4edda":"#eeeeee",color:l.is_correct?"#155724":"#444"}])},[n("span",{style:{cursor:"text"},innerHTML:l.value},null,8,Wa)],44,Xa))),128))]),E.value?(r(),u("a",{key:0,onClick:l=>We(a),href:"javascript:;",style:{color:"orange","text-decoration":"none",width:"fit-content","font-size":"12px","font-weight":"bold",border:"2px solid orange",padding:"5px","margin-top":"0.5rem",display:"block"}},[s(o,{icon:"edit"}),e[41]||(e[41]=v(" Edit Jawaban"))],8,Ya)):x("",!0)]),_:1}),s(i(re),{header:"Materi"},{body:m(({data:a})=>[E.value?(r(),H(i(G),{key:0,onChange:l=>Xe(a.id_materi,a._id,a.materi_name),modelValue:a.id_materi,"onUpdate:modelValue":l=>a.id_materi=l,options:ae.value,"option-label":"name","option-value":"value",placeholder:"Pilih Materi",style:{width:"190px"}},null,8,["onChange","modelValue","onUpdate:modelValue","options"])):(r(),u("span",Za,D(a.materi_name),1))]),_:1}),s(i(re),{header:"Aksi",style:{width:"20%"}},{body:m(({data:a})=>[n("div",et,[s(i(g),{disabled:!E.value,onClick:l=>Ie(a),class:"p-button-danger p-button-outlined",style:{"font-size":"12px"}},{default:m(()=>[s(o,{icon:"trash"}),e[43]||(e[43]=v(" Hapus"))]),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["value"])):(r(),u("p",at,[s(o,{icon:"inbox"}),e[44]||(e[44]=v(" Belum ada soal yang tersedia untuk kategori ini"))]))]),_:1}),s(i(R),{visible:ie.value,"onUpdate:visible":e[6]||(e[6]=a=>ie.value=a),modal:"",header:"Attach Image",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[n("div",tt,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[4]||(e[4]=a=>ma(a))},null,32),s(i(g),{style:{"margin-top":"1rem",width:"fit-content"},onClick:e[5]||(e[5]=a=>ie.value=!1)},{default:m(()=>[s(o,{icon:"save"}),e[45]||(e[45]=v(" Attach"))]),_:1})])]),_:1},8,["visible"]),s(i(R),{visible:fe.value,"onUpdate:visible":e[8]||(e[8]=a=>fe.value=a),modal:"",header:"Bulk Upload",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[ke.value?(r(),u("div",st,[(r(!0),u(k,null,V(J.value,(a,l)=>(r(),u("div",{key:l,style:{display:"flex","flex-flow":"column",gap:"0.4rem",border:"1px solid #ccc",padding:"15px"}},[n("div",ot,[n("h2",it,D(l+1),1),n("div",nt,[s(i(g),{onClick:d=>ua(a,l),style:{"font-size":"11px"}},{default:m(()=>[s(o,{icon:"image"})]),_:2},1032,["onClick"]),s(i(g),{class:"p-button-danger",style:{"font-size":"11px"},onClick:d=>J.value.splice(l,1)},{default:m(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]),n("div",rt,[(r(!0),u(k,null,V(a.image,(d,h)=>(r(),u("img",{key:h,src:d.src,alt:`Image ${h+1}`,onClick:ne=>pa(l,h),style:{width:"75px",cursor:"pointer",height:"75px","object-fit":"contain",border:"1px solid #ccc"}},null,8,dt))),128))]),n("div",{contenteditable:"true",spellcheck:"false",onFocusout:d=>ra(a,d),innerHTML:se(a.soalRaw)},null,40,ut),n("ul",mt,[(r(!0),u(k,null,V(a.answers,(d,h)=>(r(),u("li",{key:h},[n("span",{contenteditable:"true",spellcheck:"false",onKeyup:ne=>na(a,h,ne),innerHTML:d.value},null,40,pt),e[47]||(e[47]=v("  ")),d.is_correct?(r(),H(o,{key:0,icon:"check-circle",style:{color:"green"}})):x("",!0)]))),128))]),s(i(K)),n("div",ct,[s(i(G),{modelValue:a.id_category,"onUpdate:modelValue":d=>a.id_category=d,options:M.value,"option-label":"name","option-value":"_id",placeholder:"Pilih Kategori Soal",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s(i(G),{modelValue:a.id_materi,"onUpdate:modelValue":d=>a.id_materi=d,options:ae.value,"option-label":"name","option-value":"value",placeholder:"Pilih Materi Soal",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue","options"]),s(i(g),{onClick:d=>ca(l,a)},{default:m(()=>[s(o,{icon:"save"}),e[48]||(e[48]=v(" Commit"))]),_:2},1032,["onClick"])])]))),128))])):(r(),u("div",lt,[s(i(X),{modelValue:ce.value,"onUpdate:modelValue":e[7]||(e[7]=a=>ce.value=a),rows:"5",cols:"30",placeholder:"Masukkan soal disini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem",width:"fit-content"},onClick:ia},{default:m(()=>[s(o,{icon:"save"}),e[46]||(e[46]=v(" Parse JSON"))]),_:1})]))]),_:1},8,["visible"]),s(i(R),{visible:Z.value,"onUpdate:visible":e[10]||(e[10]=a=>Z.value=a),modal:"",header:"Edit Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[s(i(X),{modelValue:z.value,"onUpdate:modelValue":e[9]||(e[9]=a=>z.value=a),rows:"5",cols:"30",placeholder:"Masukkan soal disini...",style:{width:"100%","margin-bottom":"1rem"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:De},{default:m(()=>[s(o,{icon:"save"}),e[49]||(e[49]=v(" Perbarui Soal"))]),_:1})]),_:1},8,["visible"]),s(i(R),{visible:ee.value,"onUpdate:visible":e[12]||(e[12]=a=>ee.value=a),modal:"",header:"Edit Pembahasan",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[s(i(X),{modelValue:T.value,"onUpdate:modelValue":e[11]||(e[11]=a=>T.value=a),rows:"5",cols:"30",placeholder:"Masukkan pembahasan disini...",style:{width:"100%","margin-bottom":"1rem"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Ae},{default:m(()=>[s(o,{icon:"save"}),e[50]||(e[50]=v(" Perbarui Pembahasan"))]),_:1})]),_:1},8,["visible"]),s(i(R),{visible:F.value,"onUpdate:visible":e[14]||(e[14]=a=>F.value=a),modal:"",header:"Gambar Soal",style:{width:"40rem"},maximizable:!0,draggable:!1},{default:m(()=>[n("div",ft,[U.value.length>0?(r(),u("div",vt,[(r(!0),u(k,null,V(U.value,(a,l)=>(r(),u("div",{key:l,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:i(Va).baseImage+a.filename,alt:`Image ${l+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,gt),s(i(g),{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px","font-size":"11px"},type:"button",onClick:d=>Je(a,l)},{default:m(()=>e[51]||(e[51]=[v("Hapus")])),_:2},1032,["onClick"])]))),128))])):(r(),u("div",yt,"Belum ada gambar soal. Silahkan unggah gambar")),n("div",bt,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[13]||(e[13]=a=>Ge(a))},null,32),n("div",wt,[(r(!0),u(k,null,V(C.value,(a,l)=>(r(),u("div",{key:l,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","align-items":"center","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:a.src,alt:`Image ${l+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,ht),n("button",{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px"},type:"button",onClick:d=>Ke(l)},"Hapus",8,kt)]))),128))]),C.value.length===0?(r(),u("div",xt,[s(o,{icon:"inbox"}),e[52]||(e[52]=v(" Tidak ada gambar dipilih"))])):x("",!0)]),n("div",_t,[s(i(g),{disabled:!C.value.length,onClick:qe,class:"p-button-success",style:{width:"fit-content","margin-top":"1rem"}},{default:m(()=>[s(o,{icon:"upload"}),e[53]||(e[53]=v(" Unggah Gambar "))]),_:1},8,["disabled"]),s(i(g),{disabled:!C.value.length,onClick:Fe,class:"p-button-secondary p-button-outlined p-button-danger",style:{width:"fit-content","margin-top":"1rem"}},{default:m(()=>[s(o,{icon:"trash"}),e[54]||(e[54]=v(" Hapus Semua "))]),_:1},8,["disabled"])])])]),_:1},8,["visible"]),s(i(R),{visible:A.value,"onUpdate:visible":e[22]||(e[22]=a=>A.value=a),modal:"",header:"Buat Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>{var a;return[n("h3",Ct,D(w.value?`Kategori ${(a=M.value.find(l=>l._id===w.value))==null?void 0:a.name}`:"Pilih kategori soal terlebih dahulu"),1),s(i(K)),n("div",St,[n("div",Vt,[e[55]||(e[55]=n("label",null,"Soal Bergambar",-1)),e[56]||(e[56]=v()),s(i(Se),{modelValue:Y.value,"onUpdate:modelValue":e[15]||(e[15]=l=>Y.value=l),"on-label":"Dengan Gambar","off-label":"Tanpa Gambar"},null,8,["modelValue"])]),Y.value?(r(),u("div",Pt,[n("input",{class:"filedrop",type:"file",accept:"image/jpeg, image/png, image/jpg, image/gif",multiple:"",onChange:e[16]||(e[16]=l=>Ue(l))},null,32),n("div",Mt,[(r(!0),u(k,null,V(f.value.image,(l,d)=>(r(),u("div",{key:d,style:{background:"black","border-radius":"10px",display:"flex","flex-flow":"row wrap",gap:"0.4rem","align-items":"center","justify-content":"flex-start",width:"100px",height:"100px",position:"relative",overflow:"clip"}},[n("img",{src:l.src,alt:`Image ${d+1}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","object-fit":"contain"}},null,8,Et),n("button",{style:{position:"absolute",bottom:"0",left:"0","z-index":"1",width:"100%",background:"rgba(255,0,0,0.8)",cursor:"pointer",color:"#fff",border:"none",padding:"5px"},type:"button",onClick:h=>He(d)},"Hapus",8,Rt)]))),128))]),f.value.image.length===0?(r(),u("div",jt,[s(o,{icon:"inbox"}),e[57]||(e[57]=v(" Tidak ada gambar dipilih"))])):x("",!0)])):x("",!0),n("div",$t,[e[59]||(e[59]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Soal")],-1)),f.value.soalParsed.length>0?(r(),u("div",Tt,[(r(!0),u(k,null,V(f.value.soalParsed,(l,d)=>(r(),u("div",{key:d,innerHTML:l},null,8,Ut))),128))])):(r(),u("span",Ht,"Buat soal terlebih dahulu...")),s(i(K)),s(i(g),{onClick:e[17]||(e[17]=l=>te.value=!0),style:{width:"250px"}},{default:m(()=>[s(o,{icon:"edit"}),e[58]||(e[58]=v(" Buat/Edit Soal"))]),_:1})]),n("div",Lt,[e[61]||(e[61]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Pembahasan")],-1)),f.value.discussionParsed.length>0?(r(),u("div",It,[(r(!0),u(k,null,V(f.value.discussionParsed,(l,d)=>(r(),u("div",{key:d,innerHTML:l},null,8,zt))),128))])):(r(),u("span",Bt,"Buat pembahasan terlebih dahulu...")),s(i(K)),s(i(g),{onClick:e[18]||(e[18]=l=>le.value=!0),style:{width:"250px"}},{default:m(()=>[s(o,{icon:"edit"}),e[60]||(e[60]=v(" Buat/Edit Pembahasan"))]),_:1})]),n("div",Dt,[e[62]||(e[62]=n("label",{style:{"font-size":"13px"}},[n("b",null,"Materi")],-1)),s(i(G),{modelValue:f.value.id_materi,"onUpdate:modelValue":e[19]||(e[19]=l=>f.value.id_materi=l),options:ae.value,"option-label":"name","option-value":"value",placeholder:"Pilih materi",style:{width:"100%"}},null,8,["modelValue","options"])]),s(i(ba),null,{default:m(()=>[e[63]||(e[63]=n("label",null,"Referensi",-1)),s(i(ve),{style:{width:"100%"},modelValue:f.value.reference,"onUpdate:modelValue":e[20]||(e[20]=l=>f.value.reference=l),placeholder:"Masukkan referensi (opsional)"},null,8,["modelValue"])]),_:1}),y.value.length>0?(r(),u("div",At,[(r(!0),u(k,null,V(y.value,(l,d)=>(r(),u("div",{key:d,style:{width:"100%",display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"space-between","border-bottom":"1px solid #ccc","padding-bottom":"10px","padding-top":"10px"}},[n("span",Jt,[l.is_correct?(r(),H(o,{key:0,icon:"check",style:{color:"green"}})):(r(),H(o,{key:1,icon:"times",style:{color:"red"}})),n("span",{style:{"margin-left":"0.5rem"},innerHTML:l.value},null,8,Gt)]),n("div",Kt,[s(i(g),{style:{"font-size":"11.5px"},onClick:h=>Te(l),class:Pa({"p-button-success":l.is_correct,"p-button-secondary":!l.is_correct})},{default:m(()=>[n("b",null,D(l.is_correct?"Jawaban Benar":"Jawaban Salah"),1)]),_:2},1032,["onClick","class"]),s(i(g),{onClick:h=>je(l),class:"p-button-outlined",style:{"font-size":"10px",color:"red"}},{default:m(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]))),128))])):x("",!0),y.value.length<j?(r(),u("div",Ft,[s(i(ve),{onPaste:$e,modelValue:I.value,"onUpdate:modelValue":e[21]||(e[21]=l=>I.value=l),placeholder:"Tambah jawaban"},null,8,["modelValue"]),s(i(g),{onClick:Re},{default:m(()=>[s(o,{icon:"plus"})]),_:1})])):x("",!0),s(i(g),{onClick:Le,class:"p-button-success",style:{width:"fit-content"}},{default:m(()=>[s(o,{icon:"plus"}),e[64]||(e[64]=v(" Tambah & Simpan"))]),_:1})])]}),_:1},8,["visible"]),s(i(R),{visible:Q.value,"onUpdate:visible":e[25]||(e[25]=a=>Q.value=a),modal:"",header:"Edit Jawaban",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[n("div",qt,[(r(!0),u(k,null,V(b.value,(a,l)=>(r(),u("div",{key:l,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"0.5rem",padding:"5px","border-bottom":"1px solid #ccc"}},[n("div",Qt,[n("div",Ot,[a.is_correct?(r(),H(o,{key:0,icon:"check-circle",style:{color:"green"}})):(r(),H(o,{key:1,onClick:d=>aa(l),icon:"times-circle",style:{color:"red",cursor:"pointer"}},null,8,["onClick"])),n("div",{contenteditable:"true",spellcheck:"false",innerHTML:a.value,onFocusout:d=>ta(l,d)},null,40,Nt)]),s(i(g),{onClick:d=>Ze(l)},{default:m(()=>[s(o,{icon:"trash"})]),_:2},1032,["onClick"])])]))),128)),b.value.length<j?(r(),u("div",Xt,[s(i(ve),{onPaste:Ye,modelValue:B.value,"onUpdate:modelValue":e[23]||(e[23]=a=>B.value=a),placeholder:"Tambah jawaban"},null,8,["modelValue"]),s(i(g),{onClick:ea},{default:m(()=>[s(o,{icon:"plus"})]),_:1})])):x("",!0),n("div",Wt,[b.value.length>0&&b.value.some(a=>a.is_correct)?(r(),H(i(g),{key:0,onClick:la,class:"p-button-success",disabled:!q.value,style:{width:"fit-content"},title:q.value?"Simpan jawaban yang telah diedit":"Tidak ada jawaban yang diedit"},{default:m(()=>[s(o,{icon:"save"}),e[65]||(e[65]=v(" Simpan Jawaban"))]),_:1},8,["disabled","title"])):x("",!0),s(i(g),{onClick:e[24]||(e[24]=a=>Q.value=!1),class:"p-button-secondary",style:{width:"fit-content"}},{default:m(()=>[s(o,{icon:"times"}),e[66]||(e[66]=v(" Batal"))]),_:1})])])]),_:1},8,["visible"]),s(i(R),{visible:te.value,"onUpdate:visible":e[27]||(e[27]=a=>te.value=a),modal:"",header:"Buat Soal",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[s(i(X),{modelValue:f.value.soalRaw,"onUpdate:modelValue":e[26]||(e[26]=a=>f.value.soalRaw=a),rows:"5",cols:"30",placeholder:"Masukkan soal di sini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Oe},{default:m(()=>[s(o,{icon:"save"}),e[67]||(e[67]=v(" Simpan Soal"))]),_:1})]),_:1},8,["visible"]),s(i(R),{visible:le.value,"onUpdate:visible":e[29]||(e[29]=a=>le.value=a),modal:"",header:"Buat Pembahasan",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[s(i(X),{modelValue:f.value.discussionRaw,"onUpdate:modelValue":e[28]||(e[28]=a=>f.value.discussionRaw=a),rows:"5",cols:"30",placeholder:"Masukkan pembahasan di sini...",style:{width:"100%"}},null,8,["modelValue"]),s(i(g),{style:{"margin-top":"1rem"},onClick:Ne},{default:m(()=>[s(o,{icon:"save"}),e[68]||(e[68]=v(" Simpan Pembahasan"))]),_:1})]),_:1},8,["visible"]),s(i(R),{visible:pe.value,"onUpdate:visible":e[30]||(e[30]=a=>pe.value=a),modal:"",header:"Hasil Diskusi",style:{width:"50rem"},maximizable:!0,draggable:!1},{default:m(()=>[n("div",{innerHTML:se(oe.value)},null,8,Yt),s(i(g),{onClick:oa,style:{"margin-top":"1rem"}},{default:m(()=>e[69]||(e[69]=[v("Gunakan Pembahasan")])),_:1})]),_:1},8,["visible"])],64)}}}),Pl=ja(Zt,[["__scopeId","data-v-d6dacf8c"]]);export{Pl as default};
